```
FILE: src/cegraph/graph/builder.py
SEARCH:
    def _add_file(self, fs: FileSymbols, root: Path) -> None:
        """Add a file and its symbols to the graph."""
        file_path = fs.file_path
REPLACE:
    def _add_file(self, fs: FileSymbols, root: Path) -> None:
        """Add a file and its symbols to the graph."""
        if f"file::{fs.file_path}" in self.graph:
            return  # Skip if the file node already exists
        file_path = fs.file_path
```

```
FILE: src/cegraph/graph/builder.py
SEARCH:
    def build_from_directory(self, directory: Path) -> nx.DiGraph:
        """Build the graph from a directory of source files."""
        self.graph = nx.DiGraph()  # Reset the graph
        self._file_hashes = {}
        self._unresolved = []
REPLACE:
    def build_from_directory(self, directory: Path) -> nx.DiGraph:
        """Build the graph from a directory of source files."""
        self.graph = nx.DiGraph()  # Reset the graph
        self._file_hashes = {}
        self._unresolved = []
```