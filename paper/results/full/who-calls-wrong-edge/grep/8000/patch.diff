FILE: cegraph/graph/query.py
SEARCH:
    def who_calls(self, symbol_name: str, max_depth: int = 1) -> list[dict]:
        """Find all callers of a given symbol up to a certain depth."""
        symbol_ids = self.find_symbol(symbol_name)
        callers = []
        for sid in symbol_ids:
            for pred in self.graph.predecessors(sid):
                callers.append(self._get_call_info(pred, sid, 0))
REPLACE:
    def who_calls(self, symbol_name: str, max_depth: int = 1) -> list[dict]:
        """Find all callers of a given symbol up to a certain depth."""
        symbol_ids = self.find_symbol(symbol_name)
        callers = []
        for sid in symbol_ids:
            for pred in self.graph.predecessors(sid):
                edge_data = self.graph.get_edge_data(pred, sid)
                if edge_data and edge_data.get("kind") == "calls":
                    callers.append(self._get_call_info(pred, sid, 0))
