FILE: cegraph/graph/query.py
SEARCH:
    def what_calls(self, symbol_name: str, max_depth: int = 1) -> list[dict]:
        """Find all symbols that call the given symbol."""
        symbol_ids = self.find_symbol(symbol_name)
        callers = []
        for sid in symbol_ids:
            for pred in self.graph.predecessors(sid):
                edge_data = self.graph.edges[pred, sid]
                if edge_data.get("kind") == "contains":
                    callers.append(self.get_symbol_info(pred))
        return callers
REPLACE:
    def what_calls(self, symbol_name: str, max_depth: int = 1) -> list[dict]:
        """Find all symbols that call the given symbol."""
        symbol_ids = self.find_symbol(symbol_name)
        callers = []
        for sid in symbol_ids:
            for pred in self.graph.predecessors(sid):
                edge_data = self.graph.edges[pred, sid]
                if edge_data.get("kind") == "calls":
                    callers.append(self.get_symbol_info(pred))
        return callers
