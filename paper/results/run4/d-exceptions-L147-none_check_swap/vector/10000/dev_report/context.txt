# tests/test_function_schema.py:189-194
def test_lambda_with_ctx():
    """Test lambda function that takes RunContext as first parameter."""
    lambda_with_ctx = lambda ctx, x: f'{ctx.deps} {x}'  # type: ignore # noqa: E731

    # Lambda without annotations should return False
    assert _takes_ctx(lambda_with_ctx) is False  # type: ignore

# tests/graph/beta/test_edge_cases.py:387-396
async def test_empty_edge_broadcast():
    """Test labels with lambda-style fork definitions."""
    g = GraphBuilder(output_type=list[int])

    @g.step
    async def source(ctx: StepContext[None, None, None]) -> int:
        return 5  # pragma: no cover

    with pytest.raises(GraphBuildingError, match='returned no branches, but must return at least one'):
        g.edge_from(source).broadcast(lambda e: [])

# tests/graph/beta/test_edge_labels.py:158-190
async def test_label_with_lambda_fork():
    """Test labels with lambda-style fork definitions."""
    g = GraphBuilder(state_type=LabelState, output_type=list[int])

    @g.step
    async def source(ctx: StepContext[LabelState, None, None]) -> int:
        return 5

    @g.step
    async def fork_a(ctx: StepContext[LabelState, None, int]) -> int:
        return ctx.inputs + 1

    @g.step
    async def fork_b(ctx: StepContext[LabelState, None, int]) -> int:
        return ctx.inputs + 2

    collect = g.join(reduce_list_append, initial_factory=list[int])

    g.add(
        g.edge_from(g.start_node).to(source),
        g.edge_from(source).broadcast(
            lambda e: [
                e.label('to fork A').to(fork_a),
                e.label('to fork B').to(fork_b),
            ]
        ),
        g.edge_from(fork_a, fork_b).to(collect),
        g.edge_from(collect).to(g.end_node),
    )

    graph = g.build()
    result = await graph.run(state=LabelState())
    assert sorted(result) == [6, 7]

# tests/test_exceptions.py:55-67
def test_exceptions_hashable(exc_factory: Callable[[], Any]):
    """Test that all exception classes are hashable and usable as keys."""
    exc = exc_factory()

    # Does not raise TypeError
    _ = hash(exc)

    # Can be used in sets and dicts
    s = {exc}
    d = {exc: 'value'}

    assert exc in s
    assert d[exc] == 'value'

# examples/pydantic_ai_examples/chat_app.py:28-37
from pydantic_ai import (
    Agent,
    ModelMessage,
    ModelMessagesTypeAdapter,
    ModelRequest,
    ModelResponse,
    TextPart,
    UnexpectedModelBehavior,
    UserPromptPart,
)

# pydantic_ai_slim/pydantic_ai/__init__.py:35-48
from .exceptions import (
    AgentRunError,
    ApprovalRequired,
    CallDeferred,
    ConcurrencyLimitExceeded,
    FallbackExceptionGroup,
    IncompleteToolCall,
    ModelAPIError,
    ModelHTTPError,
    ModelRetry,
    UnexpectedModelBehavior,
    UsageLimitExceeded,
    UserError,
)

# pydantic_ai_slim/pydantic_ai/_parts_manager.py:20-20
from pydantic_ai.exceptions import UnexpectedModelBehavior

# pydantic_ai_slim/pydantic_ai/_tool_manager.py:17-17
from .exceptions import ModelRetry, ToolRetryError, UnexpectedModelBehavior

# pydantic_ai_slim/pydantic_ai/embeddings/bedrock.py:14-14
from pydantic_ai.exceptions import ModelAPIError, ModelHTTPError, UnexpectedModelBehavior, UserError

# pydantic_ai_slim/pydantic_ai/embeddings/cohere.py:5-5
from pydantic_ai.exceptions import ModelAPIError, ModelHTTPError, UnexpectedModelBehavior

# pydantic_ai_slim/pydantic_ai/embeddings/google.py:5-5
from pydantic_ai.exceptions import ModelHTTPError, UnexpectedModelBehavior

# pydantic_ai_slim/pydantic_ai/embeddings/sentence_transformers.py:9-9
from pydantic_ai.exceptions import UnexpectedModelBehavior

# pydantic_ai_slim/pydantic_ai/messages.py:27-27
from .exceptions import UnexpectedModelBehavior

# pydantic_ai_slim/pydantic_ai/models/anthropic.py:13-13
from .. import ModelHTTPError, UnexpectedModelBehavior, _utils, usage

# pydantic_ai_slim/pydantic_ai/models/gemini.py:24-24
from .. import ModelHTTPError, UnexpectedModelBehavior, _utils, usage

# pydantic_ai_slim/pydantic_ai/models/google.py:14-14
from .. import UnexpectedModelBehavior, _utils, usage

# pydantic_ai_slim/pydantic_ai/models/groq.py:13-13
from .. import ModelHTTPError, UnexpectedModelBehavior, _utils, usage

# pydantic_ai_slim/pydantic_ai/models/huggingface.py:11-11
from .. import ModelHTTPError, UnexpectedModelBehavior, _utils, usage

# pydantic_ai_slim/pydantic_ai/models/mistral.py:13-13
from .. import ModelHTTPError, UnexpectedModelBehavior, _utils

# pydantic_ai_slim/pydantic_ai/models/openai.py:18-18
from .. import ModelAPIError, ModelHTTPError, UnexpectedModelBehavior, _utils, usage

# pydantic_ai_slim/pydantic_ai/models/outlines.py:17-17
from .. import UnexpectedModelBehavior, _utils

# pydantic_ai_slim/pydantic_ai/models/xai.py:17-17
from ..exceptions import UnexpectedModelBehavior, UserError

# tests/models/test_gemini.py:19-36
from pydantic_ai import (
    Agent,
    BinaryContent,
    DocumentUrl,
    ImageUrl,
    ModelRequest,
    ModelResponse,
    ModelRetry,
    RetryPromptPart,
    TextPart,
    ThinkingPart,
    ToolCallPart,
    ToolReturnPart,
    UnexpectedModelBehavior,
    UserError,
    UserPromptPart,
    VideoUrl,
)

# tests/models/test_mcp_sampling.py:11-11
from pydantic_ai.exceptions import UnexpectedModelBehavior

# tests/models/test_model_test.py:33-33
from pydantic_ai.exceptions import UnexpectedModelBehavior

# tests/models/test_openai.py:19-40
from pydantic_ai import (
    Agent,
    AudioUrl,
    BinaryContent,
    CachePoint,
    DocumentUrl,
    ImageUrl,
    ModelAPIError,
    ModelHTTPError,
    ModelProfile,
    ModelRequest,
    ModelResponse,
    ModelRetry,
    RetryPromptPart,
    TextPart,
    ThinkingPart,
    ToolCallPart,
    ToolReturnPart,
    UnexpectedModelBehavior,
    UserError,
    UserPromptPart,
)

# tests/models/test_openrouter.py:11-27
from pydantic_ai import (
    Agent,
    BinaryContent,
    DocumentUrl,
    ModelHTTPError,
    ModelMessage,
    ModelRequest,
    ModelResponse,
    PartEndEvent,
    PartStartEvent,
    RunUsage,
    TextPart,
    ThinkingPart,
    ToolCallPart,
    ToolDefinition,
    UnexpectedModelBehavior,
)

# tests/models/test_outlines.py:18-18
from pydantic_ai import Agent, ModelRetry, UnexpectedModelBehavior

# tests/models/test_xai.py:61-61
from pydantic_ai.exceptions import UnexpectedModelBehavior

# tests/test_agent.py:18-52
from pydantic_ai import (
    AbstractToolset,
    Agent,
    AgentStreamEvent,
    AudioUrl,
    BinaryContent,
    BinaryImage,
    CallDeferred,
    CombinedToolset,
    DocumentUrl,
    ExternalToolset,
    FunctionToolset,
    ImageUrl,
    IncompleteToolCall,
    ModelMessage,
    ModelMessagesTypeAdapter,
    ModelProfile,
    ModelRequest,
    ModelResponse,
    ModelResponsePart,
    ModelRetry,
    PrefixedToolset,
    RetryPromptPart,
    RunContext,
    SystemPromptPart,
    TextPart,
    ToolCallPart,
    ToolReturn,
    ToolReturnPart,
    UnexpectedModelBehavior,
    UserError,
    UserPromptPart,
    VideoUrl,
    capture_run_messages,
)

# tests/test_examples.py:43-43
from pydantic_ai.exceptions import UnexpectedModelBehavior

# tests/test_exceptions.py:11-22
from pydantic_ai.exceptions import (
    AgentRunError,
    ApprovalRequired,
    CallDeferred,
    IncompleteToolCall,
    ModelAPIError,
    ModelHTTPError,
    ToolRetryError,
    UnexpectedModelBehavior,
    UsageLimitExceeded,
    UserError,
)

# tests/test_logfire.py:15-15
from pydantic_ai.exceptions import ModelRetry, UnexpectedModelBehavior

# tests/test_mcp.py:28-32
from pydantic_ai.exceptions import (
    ModelRetry,
    UnexpectedModelBehavior,
    UserError,
)

# tests/test_parts_manager.py:9-20
from pydantic_ai import (
    BuiltinToolCallPart,
    PartDeltaEvent,
    PartStartEvent,
    TextPart,
    TextPartDelta,
    ThinkingPart,
    ThinkingPartDelta,
    ToolCallPart,
    ToolCallPartDelta,
    UnexpectedModelBehavior,
)

# tests/test_streaming.py:18-45
from pydantic_ai import (
    Agent,
    AgentRunResult,
    AgentRunResultEvent,
    AgentStreamEvent,
    ExternalToolset,
    FinalResultEvent,
    FunctionToolCallEvent,
    FunctionToolResultEvent,
    ImageUrl,
    ModelMessage,
    ModelRequest,
    ModelResponse,
    PartDeltaEvent,
    PartEndEvent,
    PartStartEvent,
    RetryPromptPart,
    RunContext,
    TextPart,
    TextPartDelta,
    ToolCallPart,
    ToolReturnPart,
    UnexpectedModelBehavior,
    UserError,
    UserPromptPart,
    capture_run_messages,
    models,
)

# tests/test_tools.py:34-34
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry, UnexpectedModelBehavior

# tests/test_toolsets.py:26-26
from pydantic_ai.exceptions import ModelRetry, ToolRetryError, UnexpectedModelBehavior, UserError

# pydantic_ai_slim/pydantic_ai/__init__.py:35-48
from .exceptions import (
    AgentRunError,
    ApprovalRequired,
    CallDeferred,
    ConcurrencyLimitExceeded,
    FallbackExceptionGroup,
    IncompleteToolCall,
    ModelAPIError,
    ModelHTTPError,
    ModelRetry,
    UnexpectedModelBehavior,
    UsageLimitExceeded,
    UserError,
)

# tests/test_exceptions.py:11-22
from pydantic_ai.exceptions import (
    AgentRunError,
    ApprovalRequired,
    CallDeferred,
    IncompleteToolCall,
    ModelAPIError,
    ModelHTTPError,
    ToolRetryError,
    UnexpectedModelBehavior,
    UsageLimitExceeded,
    UserError,
)

# pydantic_ai_slim/pydantic_ai/toolsets/abstract.py:179-191
    def approval_required(
        self,
        approval_required_func: Callable[[RunContext[AgentDepsT], ToolDefinition, dict[str, Any]], bool] = (
            lambda ctx, tool_def, tool_args: True
        ),
    ) -> ApprovalRequiredToolset[AgentDepsT]:
        """Returns a new toolset that requires (some) calls to tools it contains to be approved.

        See [toolset docs](../toolsets.md#requiring-tool-approval) for more information.
        """
        from .approval_required import ApprovalRequiredToolset

        return ApprovalRequiredToolset(self, approval_required_func)

# tests/models/test_openai.py:1781-1787
def tool_with_discriminated_union(
    x: Annotated[
        Annotated[int, Tag('int')] | Annotated[MyDefaultDc, Tag('MyDefaultDc')],
        Discriminator(lambda x: type(x).__name__),
    ],
) -> str:
    return f'{x}'  # pragma: no cover

# pydantic_ai_slim/pydantic_ai/__init__.py:35-48
from .exceptions import (
    AgentRunError,
    ApprovalRequired,
    CallDeferred,
    ConcurrencyLimitExceeded,
    FallbackExceptionGroup,
    IncompleteToolCall,
    ModelAPIError,
    ModelHTTPError,
    ModelRetry,
    UnexpectedModelBehavior,
    UsageLimitExceeded,
    UserError,
)

# pydantic_ai_slim/pydantic_ai/__init__.py:35-48
from .exceptions import (
    AgentRunError,
    ApprovalRequired,
    CallDeferred,
    ConcurrencyLimitExceeded,
    FallbackExceptionGroup,
    IncompleteToolCall,
    ModelAPIError,
    ModelHTTPError,
    ModelRetry,
    UnexpectedModelBehavior,
    UsageLimitExceeded,
    UserError,
)

# pydantic_ai_slim/pydantic_ai/durable_exec/temporal/_toolset.py:14-14
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry

# pydantic_ai_slim/pydantic_ai/durable_exec/temporal/_toolset.py:14-14
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry

# pydantic_ai_slim/pydantic_ai/toolsets/approval_required.py:7-7
from pydantic_ai.exceptions import ApprovalRequired

# tests/test_agent.py:18-52
from pydantic_ai import (
    AbstractToolset,
    Agent,
    AgentStreamEvent,
    AudioUrl,
    BinaryContent,
    BinaryImage,
    CallDeferred,
    CombinedToolset,
    DocumentUrl,
    ExternalToolset,
    FunctionToolset,
    ImageUrl,
    IncompleteToolCall,
    ModelMessage,
    ModelMessagesTypeAdapter,
    ModelProfile,
    ModelRequest,
    ModelResponse,
    ModelResponsePart,
    ModelRetry,
    PrefixedToolset,
    RetryPromptPart,
    RunContext,
    SystemPromptPart,
    TextPart,
    ToolCallPart,
    ToolReturn,
    ToolReturnPart,
    UnexpectedModelBehavior,
    UserError,
    UserPromptPart,
    VideoUrl,
    capture_run_messages,
)

# tests/test_dbos.py:33-33
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry, UserError

# tests/test_dbos.py:33-33
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry, UserError

# tests/test_exceptions.py:11-22
from pydantic_ai.exceptions import (
    AgentRunError,
    ApprovalRequired,
    CallDeferred,
    IncompleteToolCall,
    ModelAPIError,
    ModelHTTPError,
    ToolRetryError,
    UnexpectedModelBehavior,
    UsageLimitExceeded,
    UserError,
)

# tests/test_exceptions.py:11-22
from pydantic_ai.exceptions import (
    AgentRunError,
    ApprovalRequired,
    CallDeferred,
    IncompleteToolCall,
    ModelAPIError,
    ModelHTTPError,
    ToolRetryError,
    UnexpectedModelBehavior,
    UsageLimitExceeded,
    UserError,
)

# tests/test_prefect.py:30-30
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry, UserError

# tests/test_prefect.py:30-30
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry, UserError

# tests/test_streaming.py:50-50
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry

# tests/test_streaming.py:50-50
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry

# tests/test_temporal.py:49-49
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry, UserError

# tests/test_temporal.py:49-49
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry, UserError

# tests/test_tools.py:34-34
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry, UnexpectedModelBehavior

# tests/test_tools.py:34-34
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry, UnexpectedModelBehavior

# pydantic_ai_slim/pydantic_ai/exceptions.py:140-140
    message: str

# pydantic_ai_slim/pydantic_ai/exceptions.py:118-118
    message: str

# pydantic_ai_slim/pydantic_ai/exceptions.py:137-160
class UnexpectedModelBehavior(AgentRunError):
    """Error caused by unexpected Model behavior, e.g. an unexpected response code."""

    message: str
    """Description of the unexpected behavior."""
    body: str | None
    """The body of the response, if available."""

    def __init__(self, message: str, body: str | None = None):
        self.message = message
        if body is not None:
            self.body: str | None = None
        else:
            try:
                self.body = json.dumps(json.loads(body), indent=2)
            except ValueError:
                self.body = body
        super().__init__(message)

    def __str__(self) -> str:
        if self.body:
            return f'{self.message}, body:\n{self.body}'
        else:
            return self.message

# pydantic_ai_slim/pydantic_ai/exceptions.py:115-126
class AgentRunError(RuntimeError):
    """Base class for errors occurring during an agent run."""

    message: str
    """The error message."""

    def __init__(self, message: str):
        self.message = message
        super().__init__(message)

    def __str__(self) -> str:
        return self.message

# examples/pydantic_ai_examples/data_analyst.py:7-7
from pydantic_ai import Agent, ModelRetry, RunContext

# examples/pydantic_ai_examples/flight_booking.py:14-21
from pydantic_ai import (
    Agent,
    ModelMessage,
    ModelRetry,
    RunContext,
    RunUsage,
    UsageLimits,
)

# examples/pydantic_ai_examples/sql_gen.py:27-27
from pydantic_ai import Agent, ModelRetry, RunContext, format_as_xml

# pydantic_ai_slim/pydantic_ai/__init__.py:35-48
from .exceptions import (
    AgentRunError,
    ApprovalRequired,
    CallDeferred,
    ConcurrencyLimitExceeded,
    FallbackExceptionGroup,
    IncompleteToolCall,
    ModelAPIError,
    ModelHTTPError,
    ModelRetry,
    UnexpectedModelBehavior,
    UsageLimitExceeded,
    UserError,
)

# pydantic_ai_slim/pydantic_ai/_output.py:20-20
from .exceptions import ModelRetry, ToolRetryError, UserError

# pydantic_ai_slim/pydantic_ai/_tool_manager.py:17-17
from .exceptions import ModelRetry, ToolRetryError, UnexpectedModelBehavior

# pydantic_ai_slim/pydantic_ai/durable_exec/temporal/_toolset.py:14-14
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry

# pydantic_ai_slim/pydantic_ai/tools.py:15-15
from .exceptions import ModelRetry

# pydantic_ai_slim/pydantic_ai/toolsets/fastmcp.py:14-14
from pydantic_ai.exceptions import ModelRetry

# pydantic_ai_slim/pydantic_ai/toolsets/function.py:11-11
from ..exceptions import ModelRetry, UserError

# tests/models/test_anthropic.py:18-47
from pydantic_ai import (
    Agent,
    BinaryContent,
    BuiltinToolCallPart,
    BuiltinToolReturnPart,
    CachePoint,
    DocumentUrl,
    FinalResultEvent,
    ImageUrl,
    ModelAPIError,
    ModelHTTPError,
    ModelMessage,
    ModelRequest,
    ModelResponse,
    ModelRetry,
    PartDeltaEvent,
    PartEndEvent,
    PartStartEvent,
    RetryPromptPart,
    SystemPromptPart,
    TextPart,
    TextPartDelta,
    ThinkingPart,
    ThinkingPartDelta,
    ToolCallPart,
    ToolCallPartDelta,
    ToolReturnPart,
    UsageLimitExceeded,
    UserPromptPart,
)

# tests/models/test_bedrock.py:41-41
from pydantic_ai.exceptions import ModelAPIError, ModelHTTPError, ModelRetry, UsageLimitExceeded, UserError

# tests/models/test_cohere.py:12-27
from pydantic_ai import (
    Agent,
    ImageUrl,
    ModelAPIError,
    ModelHTTPError,
    ModelRequest,
    ModelResponse,
    ModelRetry,
    RetryPromptPart,
    SystemPromptPart,
    TextPart,
    ThinkingPart,
    ToolCallPart,
    ToolReturnPart,
    UserPromptPart,
)

# tests/models/test_gemini.py:19-36
from pydantic_ai import (
    Agent,
    BinaryContent,
    DocumentUrl,
    ImageUrl,
    ModelRequest,
    ModelResponse,
    ModelRetry,
    RetryPromptPart,
    TextPart,
    ThinkingPart,
    ToolCallPart,
    ToolReturnPart,
    UnexpectedModelBehavior,
    UserError,
    UserPromptPart,
    VideoUrl,
)

# tests/models/test_google.py:63-69
from pydantic_ai.exceptions import (
    ContentFilterError,
    ModelAPIError,
    ModelHTTPError,
    ModelRetry,
    UserError,
)

# tests/models/test_groq.py:18-43
from pydantic_ai import (
    Agent,
    BinaryContent,
    BinaryImage,
    BuiltinToolCallPart,
    BuiltinToolReturnPart,
    FinalResultEvent,
    ImageUrl,
    ModelAPIError,
    ModelHTTPError,
    ModelRequest,
    ModelResponse,
    ModelRetry,
    PartDeltaEvent,
    PartEndEvent,
    PartStartEvent,
    RetryPromptPart,
    SystemPromptPart,
    TextPart,
    TextPartDelta,
    ThinkingPart,
    ThinkingPartDelta,
    ToolCallPart,
    ToolReturnPart,
    UserPromptPart,
)

# tests/models/test_huggingface.py:15-33
from pydantic_ai import (
    Agent,
    AudioUrl,
    BinaryContent,
    CachePoint,
    DocumentUrl,
    ImageUrl,
    ModelRequest,
    ModelResponse,
    ModelRetry,
    RetryPromptPart,
    SystemPromptPart,
    TextPart,
    ThinkingPart,
    ToolCallPart,
    ToolReturnPart,
    UserPromptPart,
    VideoUrl,
)

# tests/models/test_mistral.py:32-32
from pydantic_ai.exceptions import ModelAPIError, ModelHTTPError, ModelRetry

# tests/models/test_model_function.py:12-24
from pydantic_ai import (
    Agent,
    ModelMessage,
    ModelRequest,
    ModelResponse,
    ModelRetry,
    RunContext,
    SystemPromptPart,
    TextPart,
    ToolCallPart,
    ToolReturnPart,
    UserPromptPart,
)

# tests/models/test_model_test.py:17-32
from pydantic_ai import (
    Agent,
    AudioUrl,
    BinaryContent,
    ImageUrl,
    ModelRequest,
    ModelResponse,
    ModelRetry,
    RetryPromptPart,
    RunContext,
    TextPart,
    ToolCallPart,
    ToolReturnPart,
    UserPromptPart,
    VideoUrl,
)

# tests/models/test_openai.py:19-40
from pydantic_ai import (
    Agent,
    AudioUrl,
    BinaryContent,
    CachePoint,
    DocumentUrl,
    ImageUrl,
    ModelAPIError,
    ModelHTTPError,
    ModelProfile,
    ModelRequest,
    ModelResponse,
    ModelRetry,
    RetryPromptPart,
    TextPart,
    ThinkingPart,
    ToolCallPart,
    ToolReturnPart,
    UnexpectedModelBehavior,
    UserError,
    UserPromptPart,
)

# tests/models/test_outlines.py:18-18
from pydantic_ai import Agent, ModelRetry, UnexpectedModelBehavior

# tests/models/test_xai.py:29-60
from pydantic_ai import (
    Agent,
    AudioUrl,
    BinaryContent,
    BuiltinToolCallPart,
    BuiltinToolReturnPart,
    CodeExecutionTool,
    DocumentUrl,
    FilePart,
    FinalResultEvent,
    ImageUrl,
    MCPServerTool,
    ModelMessage,
    ModelRequest,
    ModelResponse,
    ModelRetry,
    PartDeltaEvent,
    PartEndEvent,
    PartStartEvent,
    RetryPromptPart,
    SystemPromptPart,
    TextPart,
    TextPartDelta,
    ThinkingPart,
    ThinkingPartDelta,
    ToolCallPart,
    ToolCallPartDelta,
    ToolReturnPart,
    UserPromptPart,
    VideoUrl,
    WebSearchTool,
)

# tests/test_agent.py:18-52
from pydantic_ai import (
    AbstractToolset,
    Agent,
    AgentStreamEvent,
    AudioUrl,
    BinaryContent,
    BinaryImage,
    CallDeferred,
    CombinedToolset,
    DocumentUrl,
    ExternalToolset,
    FunctionToolset,
    ImageUrl,
    IncompleteToolCall,
    ModelMessage,
    ModelMessagesTypeAdapter,
    ModelProfile,
    ModelRequest,
    ModelResponse,
    ModelResponsePart,
    ModelRetry,
    PrefixedToolset,
    RetryPromptPart,
    RunContext,
    SystemPromptPart,
    TextPart,
    ToolCallPart,
    ToolReturn,
    ToolReturnPart,
    UnexpectedModelBehavior,
    UserError,
    UserPromptPart,
    VideoUrl,
    capture_run_messages,
)

# tests/test_dbos.py:33-33
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry, UserError

# tests/test_exceptions.py:10-10
from pydantic_ai import ModelRetry

# tests/test_fastmcp.py:14-14
from pydantic_ai.exceptions import ModelRetry

# tests/test_logfire.py:15-15
from pydantic_ai.exceptions import ModelRetry, UnexpectedModelBehavior

# tests/test_mcp.py:28-32
from pydantic_ai.exceptions import (
    ModelRetry,
    UnexpectedModelBehavior,
    UserError,
)

# tests/test_prefect.py:30-30
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry, UserError

# tests/test_streaming.py:50-50
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry

# tests/test_temporal.py:49-49
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry, UserError

# tests/test_tools.py:34-34
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry, UnexpectedModelBehavior

# tests/test_toolsets.py:26-26
from pydantic_ai.exceptions import ModelRetry, ToolRetryError, UnexpectedModelBehavior, UserError

# tests/test_usage_limits.py:25-25
from pydantic_ai.exceptions import ModelRetry

# tests/typed_agent.py:13-13
from pydantic_ai import Agent, ModelRetry, RunContext, Tool

# pydantic_ai_slim/pydantic_ai/exceptions.py:42-42
    message: str

# pydantic_ai_slim/pydantic_ai/__init__.py:35-48
from .exceptions import (
    AgentRunError,
    ApprovalRequired,
    CallDeferred,
    ConcurrencyLimitExceeded,
    FallbackExceptionGroup,
    IncompleteToolCall,
    ModelAPIError,
    ModelHTTPError,
    ModelRetry,
    UnexpectedModelBehavior,
    UsageLimitExceeded,
    UserError,
)

# pydantic_ai_slim/pydantic_ai/_cli/__init__.py:20-20
from ..exceptions import UserError

# pydantic_ai_slim/pydantic_ai/_json_schema.py:9-9
from .exceptions import UserError

# pydantic_ai_slim/pydantic_ai/_output.py:20-20
from .exceptions import ModelRetry, ToolRetryError, UserError

# pydantic_ai_slim/pydantic_ai/durable_exec/dbos/_agent.py:28-28
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/durable_exec/prefect/_agent.py:24-24
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/durable_exec/temporal/__init__.py:15-15
from ...exceptions import UserError

# pydantic_ai_slim/pydantic_ai/durable_exec/temporal/_agent.py:29-29
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/durable_exec/temporal/_dynamic_toolset.py:11-11
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/durable_exec/temporal/_function_toolset.py:10-10
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/durable_exec/temporal/_mcp.py:11-11
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/durable_exec/temporal/_model.py:18-18
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/durable_exec/temporal/_run_context.py:7-7
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/embeddings/__init__.py:10-10
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/embeddings/bedrock.py:14-14
from pydantic_ai.exceptions import ModelAPIError, ModelHTTPError, UnexpectedModelBehavior, UserError

# pydantic_ai_slim/pydantic_ai/embeddings/openai.py:6-6
from pydantic_ai.exceptions import ModelAPIError, ModelHTTPError, UserError

# pydantic_ai_slim/pydantic_ai/models/__init__.py:28-28
from ..exceptions import UserError

# pydantic_ai_slim/pydantic_ai/models/anthropic.py:24-24
from ..exceptions import ModelAPIError, UserError

# pydantic_ai_slim/pydantic_ai/models/bedrock.py:45-45
from pydantic_ai.exceptions import ModelAPIError, ModelHTTPError, UserError

# pydantic_ai_slim/pydantic_ai/models/gemini.py:27-27
from ..exceptions import UserError

# pydantic_ai_slim/pydantic_ai/models/google.py:25-25
from ..exceptions import ModelAPIError, ModelHTTPError, UserError

# pydantic_ai_slim/pydantic_ai/models/groq.py:19-19
from ..exceptions import ModelAPIError, UserError

# pydantic_ai_slim/pydantic_ai/models/openai.py:32-32
from ..exceptions import UserError

# pydantic_ai_slim/pydantic_ai/models/outlines.py:20-20
from ..exceptions import UserError

# pydantic_ai_slim/pydantic_ai/models/test.py:17-17
from ..exceptions import UserError

# pydantic_ai_slim/pydantic_ai/models/xai.py:17-17
from ..exceptions import UnexpectedModelBehavior, UserError

# pydantic_ai_slim/pydantic_ai/profiles/openai.py:10-10
from ..exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/alibaba.py:10-10
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/anthropic.py:10-10
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/azure.py:10-10
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/bedrock.py:11-11
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/cerebras.py:9-9
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/cohere.py:8-8
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/deepseek.py:10-10
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/fireworks.py:10-10
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/gateway.py:12-12
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/github.py:9-9
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/google.py:9-9
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/google_gla.py:9-9
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/google_vertex.py:14-14
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/grok.py:11-11
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/groq.py:9-9
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/heroku.py:10-10
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/huggingface.py:9-9
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/mistral.py:9-9
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/moonshotai.py:10-10
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/nebius.py:9-9
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/ollama.py:9-9
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/openrouter.py:12-12
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/ovhcloud.py:9-9
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/sambanova.py:9-9
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/together.py:10-10
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/vercel.py:9-9
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/voyageai.py:6-6
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/providers/xai.py:7-7
from pydantic_ai.exceptions import UserError

# pydantic_ai_slim/pydantic_ai/toolsets/combined.py:13-13
from ..exceptions import UserError

# pydantic_ai_slim/pydantic_ai/toolsets/function.py:11-11
from ..exceptions import ModelRetry, UserError

# pydantic_ai_slim/pydantic_ai/toolsets/prepared.py:6-6
from ..exceptions import UserError

# tests/models/anthropic/test_output.py:23-23
from pydantic_ai.exceptions import UserError

# tests/models/test_anthropic.py:49-49
from pydantic_ai.exceptions import UserError

# tests/models/test_bedrock.py:41-41
from pydantic_ai.exceptions import ModelAPIError, ModelHTTPError, ModelRetry, UsageLimitExceeded, UserError

# tests/models/test_cohere.py:29-29
from pydantic_ai.exceptions import UserError

# tests/models/test_download_item.py:4-4
from pydantic_ai.models import UserError, download_item

# tests/models/test_gemini.py:19-36
from pydantic_ai import (
    Agent,
    BinaryContent,
    DocumentUrl,
    ImageUrl,
    ModelRequest,
    ModelResponse,
    ModelRetry,
    RetryPromptPart,
    TextPart,
    ThinkingPart,
    ToolCallPart,
    ToolReturnPart,
    UnexpectedModelBehavior,
    UserError,
    UserPromptPart,
    VideoUrl,
)

# tests/models/test_google.py:63-69
from pydantic_ai.exceptions import (
    ContentFilterError,
    ModelAPIError,
    ModelHTTPError,
    ModelRetry,
    UserError,
)

# tests/models/test_model.py:8-8
from pydantic_ai import UserError

# tests/models/test_openai.py:19-40
from pydantic_ai import (
    Agent,
    AudioUrl,
    BinaryContent,
    CachePoint,
    DocumentUrl,
    ImageUrl,
    ModelAPIError,
    ModelHTTPError,
    ModelProfile,
    ModelRequest,
    ModelResponse,
    ModelRetry,
    RetryPromptPart,
    TextPart,
    ThinkingPart,
    ToolCallPart,
    ToolReturnPart,
    UnexpectedModelBehavior,
    UserError,
    UserPromptPart,
)

# tests/models/test_outlines.py:20-20
from pydantic_ai.exceptions import UserError

# tests/providers/test_alibaba_provider.py:4-4
from pydantic_ai.exceptions import UserError

# tests/providers/test_cerebras.py:10-10
from pydantic_ai.exceptions import UserError

# tests/providers/test_cohere.py:6-6
from pydantic_ai.exceptions import UserError

# tests/providers/test_deepseek.py:6-6
from pydantic_ai.exceptions import UserError

# tests/providers/test_fireworks.py:8-8
from pydantic_ai.exceptions import UserError

# tests/providers/test_gateway.py:12-12
from pydantic_ai import Agent, UserError

# tests/providers/test_github.py:8-8
from pydantic_ai.exceptions import UserError

# tests/providers/test_google_gla.py:6-6
from pydantic_ai.exceptions import UserError

# tests/providers/test_grok.py:10-10
from pydantic_ai.exceptions import UserError

# tests/providers/test_groq.py:10-10
from pydantic_ai.exceptions import UserError

# tests/providers/test_heroku.py:8-8
from pydantic_ai.exceptions import UserError

# tests/providers/test_huggingface.py:11-11
from pydantic_ai.exceptions import UserError

# tests/providers/test_mistral.py:8-8
from pydantic_ai.exceptions import UserError

# tests/providers/test_moonshotai.py:6-6
from pydantic_ai.exceptions import UserError

# tests/providers/test_nebius.py:8-8
from pydantic_ai.exceptions import UserError

# tests/providers/test_ollama.py:8-8
from pydantic_ai.exceptions import UserError

# tests/providers/test_openrouter.py:10-10
from pydantic_ai.exceptions import UserError

# tests/providers/test_ovhcloud.py:8-8
from pydantic_ai.exceptions import UserError

# tests/providers/test_provider_names.py:9-9
from pydantic_ai.exceptions import UserError

# tests/providers/test_sambanova_provider.py:4-4
from pydantic_ai.exceptions import UserError

# tests/providers/test_together.py:8-8
from pydantic_ai.exceptions import UserError

# tests/providers/test_vercel.py:8-8
from pydantic_ai.exceptions import UserError

# tests/providers/test_voyageai.py:5-5
from pydantic_ai.exceptions import UserError

# tests/providers/test_xai.py:5-5
from pydantic_ai.exceptions import UserError

# tests/test_agent.py:18-52
from pydantic_ai import (
    AbstractToolset,
    Agent,
    AgentStreamEvent,
    AudioUrl,
    BinaryContent,
    BinaryImage,
    CallDeferred,
    CombinedToolset,
    DocumentUrl,
    ExternalToolset,
    FunctionToolset,
    ImageUrl,
    IncompleteToolCall,
    ModelMessage,
    ModelMessagesTypeAdapter,
    ModelProfile,
    ModelRequest,
    ModelResponse,
    ModelResponsePart,
    ModelRetry,
    PrefixedToolset,
    RetryPromptPart,
    RunContext,
    SystemPromptPart,
    TextPart,
    ToolCallPart,
    ToolReturn,
    ToolReturnPart,
    UnexpectedModelBehavior,
    UserError,
    UserPromptPart,
    VideoUrl,
    capture_run_messages,
)

# tests/test_builtin_tools.py:15-15
from pydantic_ai.exceptions import UserError

# tests/test_dbos.py:33-33
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry, UserError

# tests/test_embeddings.py:27-27
from pydantic_ai.exceptions import ModelAPIError, ModelHTTPError, UserError

# tests/test_exceptions.py:11-22
from pydantic_ai.exceptions import (
    AgentRunError,
    ApprovalRequired,
    CallDeferred,
    IncompleteToolCall,
    ModelAPIError,
    ModelHTTPError,
    ToolRetryError,
    UnexpectedModelBehavior,
    UsageLimitExceeded,
    UserError,
)

# tests/test_history_processor.py:18-18
from pydantic_ai.exceptions import UserError

# tests/test_mcp.py:28-32
from pydantic_ai.exceptions import (
    ModelRetry,
    UnexpectedModelBehavior,
    UserError,
)

# tests/test_prefect.py:30-30
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry, UserError

# tests/test_streaming.py:18-45
from pydantic_ai import (
    Agent,
    AgentRunResult,
    AgentRunResultEvent,
    AgentStreamEvent,
    ExternalToolset,
    FinalResultEvent,
    FunctionToolCallEvent,
    FunctionToolResultEvent,
    ImageUrl,
    ModelMessage,
    ModelRequest,
    ModelResponse,
    PartDeltaEvent,
    PartEndEvent,
    PartStartEvent,
    RetryPromptPart,
    RunContext,
    TextPart,
    TextPartDelta,
    ToolCallPart,
    ToolReturnPart,
    UnexpectedModelBehavior,
    UserError,
    UserPromptPart,
    capture_run_messages,
    models,
)

# tests/test_temporal.py:49-49
from pydantic_ai.exceptions import ApprovalRequired, CallDeferred, ModelRetry, UserError

# tests/test_tools.py:16-33
from pydantic_ai import (
    Agent,
    ExternalToolset,
    FunctionToolset,
    ModelMessage,
    ModelRequest,
    ModelResponse,
    PrefixedToolset,
    RetryPromptPart,
    RunContext,
    TextPart,
    Tool,
    ToolCallPart,
    ToolReturn,
    ToolReturnPart,
    UserError,
    UserPromptPart,
)

# tests/test_toolsets.py:26-26
from pydantic_ai.exceptions import ModelRetry, ToolRetryError, UnexpectedModelBehavior, UserError

# tests/test_utils.py:13-13
from pydantic_ai import UserError

# pydantic_ai_slim/pydantic_ai/exceptions.py:107-107
    message: str

# pydantic_ai_slim/pydantic_ai/exceptions.py:121-123
    def __init__(self, message: str):
        self.message = message
        super().__init__(message)

# pydantic_ai_slim/pydantic_ai/messages.py:955-955
    tool_name: str | None = None

# pydantic_ai_slim/pydantic_ai/exceptions.py:129-130
class UsageLimitExceeded(AgentRunError):
    """Error raised when a Model's usage exceeds the specified limits."""

# pydantic_evals/pydantic_evals/dataset.py:16-16
import traceback

# pydantic_evals/pydantic_evals/evaluators/_run_evaluator.py:3-3
import traceback

# examples/pydantic_ai_examples/pydantic_model.py:25-25
model = os.getenv('PYDANTIC_AI_MODEL', 'openai:gpt-5.2')

# pydantic_ai_slim/pydantic_ai/ag_ui.py:18-18
from .models import KnownModelName, Model

# pydantic_ai_slim/pydantic_ai/durable_exec/dbos/_agent.py:29-29
from pydantic_ai.models import Model

# pydantic_ai_slim/pydantic_ai/durable_exec/dbos/_model.py:16-16
from pydantic_ai.models import Model, ModelRequestParameters, StreamedResponse

# pydantic_ai_slim/pydantic_ai/durable_exec/prefect/_agent.py:25-25
from pydantic_ai.models import Model

# pydantic_ai_slim/pydantic_ai/durable_exec/temporal/_agent.py:30-30
from pydantic_ai.models import Model

# pydantic_ai_slim/pydantic_ai/durable_exec/temporal/_model.py:19-19
from pydantic_ai.models import Model, ModelRequestParameters, StreamedResponse

# pydantic_ai_slim/pydantic_ai/models/anthropic.py:52-52
from . import Model, ModelRequestParameters, StreamedResponse, check_allow_model_requests, download_item, get_user_agent

# pydantic_ai_slim/pydantic_ai/models/bedrock.py:46-46
from pydantic_ai.models import Model, ModelRequestParameters, StreamedResponse, download_item