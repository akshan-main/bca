```
FILE: tests/test_concurrency.py
SEARCH:
    def __init__(self, parties: int):
        self._parties = parties
        self._count = 0
        self._lock = anyio.Lock()
        self._event = anyio.Event()
REPLACE:
    def __init__(self, parties: int):
        self._parties = parties
        self._count = 0
        self._lock = anyio.Lock()
        self._event = anyio.Event()
        self._event.set()  # Ensure the event is set initially
```