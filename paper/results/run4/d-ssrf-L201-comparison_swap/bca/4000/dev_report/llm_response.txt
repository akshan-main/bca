```
FILE: pydantic_ai_slim/pydantic_ai/_ssrf.py
SEARCH:
    def build_url_with_ip(resolved: ResolvedUrl) -> str:
        scheme = 'https' if resolved.is_https else 'http'
        return f"{scheme}://{resolved.resolved_ip}:{resolved.port}{resolved.path}"
REPLACE:
    def build_url_with_ip(resolved: ResolvedUrl) -> str:
        scheme = 'https' if resolved.is_https else 'http'
        port = '' if (not resolved.is_https and resolved.port == 80) or (resolved.is_https and resolved.port == 443) else f":{resolved.port}"
        return f"{scheme}://{resolved.resolved_ip}{port}{resolved.path}"
```