```
FILE: pydantic_ai_slim/pydantic_ai/models/concurrency.py
SEARCH:
    _limiter: AbstractConcurrencyLimiter
REPLACE:
    _limiter: Optional[AbstractConcurrencyLimiter] = None
```

```
FILE: pydantic_ai_slim/pydantic_ai/models/concurrency.py
SEARCH:
            self._limiter = ConcurrencyLimiter.from_limit(limiter)
REPLACE:
            self._limiter = ConcurrencyLimiter.from_limit(limiter) if isinstance(limiter, int) else limiter
```

```
FILE: pydantic_ai_slim/pydantic_ai/models/concurrency.py
SEARCH:
    async def request(
REPLACE:
    async def request(self, messages: list[ModelMessage], model_settings: ModelSettings | None, model_request_parameters: ModelRequestParameters) -> ModelResponse:
```

```
FILE: pydantic_ai_slim/pydantic_ai/models/concurrency.py
SEARCH:
    async def count_tokens(
REPLACE:
    async def count_tokens(self, messages: list[ModelMessage], model_settings: ModelSettings | None, model_request_parameters: ModelRequestParameters) -> RequestUsage:
```

```
FILE: pydantic_ai_slim/pydantic_ai/models/concurrency.py
SEARCH:
    async def request_stream(
REPLACE:
    async def request_stream(self, messages: list[ModelMessage], model_settings: ModelSettings | None, model_request_parameters: ModelRequestParameters, run_context: RunContext[Any] | None = None) -> AsyncIterator[StreamedResponse]:
```