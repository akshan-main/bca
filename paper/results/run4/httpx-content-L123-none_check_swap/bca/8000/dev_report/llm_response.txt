```
FILE: httpx/_utils.py
SEARCH:
def to_bytes(value: str | bytes, encoding: str = "utf-8") -> bytes:
    return value.encode(encoding) if isinstance(value, str) else value

REPLACE:
def to_bytes(value: str | bytes, encoding: str = "utf-8") -> bytes:
    return value.encode(encoding) if isinstance(value, str) else value or b""
```

```
FILE: httpx/_utils.py
SEARCH:
def to_str(value: str | bytes, encoding: str = "utf-8") -> str:
    return value if isinstance(value, str) else value.decode(encoding)

REPLACE:
def to_str(value: str | bytes, encoding: str = "utf-8") -> str:
    return value.decode(encoding) if isinstance(value, bytes) else value or ""
```

```
FILE: httpx/_client.py
SEARCH:
def _port_or_default(url: URL) -> int | None:
    if url.port is not None:
        return url.port
    return {"http": 80, "https": 443}.get(url.scheme)

REPLACE:
def _port_or_default(url: URL) -> int | None:
    if url.port is not None:
        return url.port
    return {"http": 80, "https": 443}.get(url.scheme, None)
```