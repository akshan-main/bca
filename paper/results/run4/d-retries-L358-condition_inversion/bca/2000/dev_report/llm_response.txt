```
FILE: pydantic_ai_slim/pydantic_ai/retries.py
SEARCH:
        exc = state.outcome.exception() if state.outcome else None
        if not isinstance(exc, HTTPStatusError):
            retry_after = exc.response.headers.get('retry-after')
REPLACE:
        exc = state.outcome.exception() if state.outcome else None
        if isinstance(exc, HTTPStatusError) and exc.response is not None:
            retry_after = exc.response.headers.get('retry-after')
```