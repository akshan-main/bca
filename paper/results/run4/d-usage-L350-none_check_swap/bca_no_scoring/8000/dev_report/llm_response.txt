```
FILE: pydantic_ai_slim/pydantic_ai/models/test.py
SEARCH:
        model_response = self._request(messages, model_settings, model_request_parameters)
REPLACE:
        model_response = self._request(messages, model_settings, model_request_parameters)
        model_response.usage = _estimate_usage([*messages, model_response])
        if model_response.usage.output_tokens > model_request_parameters.output_tokens_limit:
            raise UsageLimitExceeded(f'Exceeded the output_tokens_limit of {model_request_parameters.output_tokens_limit} (output_tokens={model_response.usage.output_tokens})')
```