{
  "task_id": "d-concurrency-L292-condition_inversion",
  "method": "vector",
  "budget": 8000,
  "query_type": "dev_report",
  "tokens_used": 8000,
  "symbols_selected": 38,
  "files_included": 22,
  "assembly_time_ms": 122.8,
  "llm_time_ms": 1408.4,
  "llm_input_tokens": 8622,
  "llm_output_tokens": 34,
  "tests_passed": false,
  "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
  "patch": "FILE: tests/test_concurrency.py\nSEARCH:\n        assert max_running <= 2\nREPLACE:\n        assert max_running <= agent.max_concurrency\n",
  "error": "",
  "test_time_ms": 1253.1,
  "failure_mode": "test_fail",
  "target_file_hit": true,
  "target_symbol_hit": false,
  "context_patch_overlap": 0.045,
  "patch_files_changed": 1,
  "patch_lines_changed": 1,
  "edit_distance_lines": 39,
  "entity_count_extracted": 28,
  "entity_count_mapped": 59,
  "query_identifier_density": 0.1683,
  "seed_symbol_keys": [
    "tests/test_concurrency.py::TestAgentConcurrency",
    "tests/test_concurrency.py::TestAgentConcurrency.test_agent_concurrency_limit",
    "pydantic_ai_slim/pydantic_ai/models/gemini.py::_function_call_part_from_call",
    "tests/test_concurrency.py::annotations",
    "tests/test_concurrency.py::importlib.util",
    "tests/test_concurrency.py::TYPE_CHECKING",
    "tests/test_concurrency.py::Any",
    "tests/test_concurrency.py::anyio",
    "tests/test_concurrency.py::pytest",
    "tests/test_concurrency.py::Agent",
    "tests/test_concurrency.py::ConcurrencyLimit",
    "tests/test_concurrency.py::ConcurrencyLimiter",
    "tests/test_concurrency.py::ConcurrencyLimitExceeded",
    "tests/test_concurrency.py::get_concurrency_context",
    "tests/test_concurrency.py::TestModel",
    "tests/test_concurrency.py::logfire_installed",
    "tests/test_concurrency.py::pytestmark",
    "tests/test_concurrency.py::AsyncBarrier",
    "tests/test_concurrency.py::AsyncBarrier.__init__",
    "tests/test_concurrency.py::AsyncBarrier.wait",
    "tests/test_concurrency.py::TestConcurrencyLimiter",
    "tests/test_concurrency.py::TestConcurrencyLimiter.test_basic_acquisition",
    "tests/test_concurrency.py::TestConcurrencyLimiter.test_nowait_acquisition",
    "tests/test_concurrency.py::TestConcurrencyLimiter.test_waiting_count_tracking",
    "tests/test_concurrency.py::TestConcurrencyLimiter.test_backpressure_raises",
    "tests/test_concurrency.py::TestConcurrencyLimiter.test_backpressure_race_condition",
    "tests/test_concurrency.py::TestConcurrencyLimiter.test_from_int_limit",
    "tests/test_concurrency.py::TestConcurrencyLimiter.test_from_limiter_config",
    "tests/test_concurrency.py::TestConcurrencyLimiter.test_properties",
    "tests/test_concurrency.py::TestGetConcurrencyContext",
    "tests/test_concurrency.py::TestGetConcurrencyContext.test_returns_context_when_provided",
    "tests/test_concurrency.py::TestGetConcurrencyContext.test_returns_null_context_when_none",
    "tests/test_concurrency.py::TestAgentConcurrency.test_agent_concurrency_backpressure",
    "tests/test_concurrency.py::TestAgentConcurrency.test_agent_no_limit_by_default",
    "tests/test_concurrency.py::TestAgentConcurrency.test_agent_with_int_concurrency",
    "tests/test_concurrency.py::TestAgentConcurrency.test_agent_with_limiter_concurrency",
    "tests/test_concurrency.py::TestConcurrencyLimitedModel",
    "tests/test_concurrency.py::TestConcurrencyLimitedModel.test_basic_concurrency_limit",
    "tests/test_concurrency.py::TestConcurrencyLimitedModel.test_with_int_limiter",
    "tests/test_concurrency.py::TestConcurrencyLimitedModel.test_with_concurrency_limit",
    "tests/test_concurrency.py::TestConcurrencyLimitedModel.test_with_shared_limiter",
    "tests/test_concurrency.py::TestConcurrencyLimitedModel.test_shared_limiter_limits_across_models",
    "tests/test_concurrency.py::TestConcurrencyLimitedModel.test_limit_model_concurrency_helper",
    "tests/test_concurrency.py::TestConcurrencyLimitedModel.test_model_properties_delegated",
    "tests/test_concurrency.py::TestAgentWithSharedLimiter",
    "tests/test_concurrency.py::TestAgentWithSharedLimiter.test_agent_with_shared_limiter",
    "tests/test_concurrency.py::TestConcurrencyLimiterName",
    "tests/test_concurrency.py::TestConcurrencyLimiterName.test_limiter_with_name",
    "tests/test_concurrency.py::TestConcurrencyLimiterName.test_limiter_without_name",
    "tests/test_concurrency.py::TestConcurrencyLimiterName.test_from_limit_with_name",
    "tests/test_concurrency.py::TestConcurrencyLimiterName.test_named_limiter_waiting_adds_limiter_name_attribute",
    "tests/test_concurrency.py::TestConcurrencyLimiterName.test_unnamed_limiter_waiting_uses_source_in_span_name",
    "tests/test_concurrency.py::TestConcurrencyLimiterName.test_limiter_with_max_queued_includes_attribute_in_span",
    "tests/test_concurrency.py::TestConcurrencyLimiterWithTracer",
    "tests/test_concurrency.py::TestConcurrencyLimiterWithTracer.test_custom_tracer_is_stored",
    "tests/test_concurrency.py::TestConcurrencyLimiterWithTracer.test_from_limit_with_tracer",
    "tests/test_concurrency.py::TestConcurrencyLimitedModelMethods",
    "tests/test_concurrency.py::TestConcurrencyLimitedModelMethods.test_count_tokens",
    "tests/test_concurrency.py::TestConcurrencyLimitedModelMethods.test_request_stream"
  ],
  "mutation_symbol_key": "pydantic_ai_slim/pydantic_ai/concurrency.py::normalize_to_limiter",
  "min_hops_seed_to_mutation": 2,
  "median_hops_seed_to_mutation": 4.0,
  "bca_closure_added_symbols": 0,
  "bca_closure_added_tokens": 0,
  "bca_frontier_visited": 0,
  "context_symbol_keys": [
    "pydantic_ai_slim/pydantic_ai/_output.py::AutoOutputSchema.__init__",
    "pydantic_ai_slim/pydantic_ai/_output.py::TextOutputSchema.__init__",
    "pydantic_ai_slim/pydantic_ai/_output.py::ImageOutputSchema.__init__",
    "pydantic_ai_slim/pydantic_ai/_output.py::StructuredTextOutputSchema.__init__",
    "pydantic_ai_slim/pydantic_ai/_output.py::ToolOutputSchema.__init__",
    "pydantic_ai_slim/pydantic_ai/_output.py::ObjectOutputProcessor.__init__",
    "pydantic_ai_slim/pydantic_ai/_output.py::UnionOutputProcessor.__init__",
    "pydantic_ai_slim/pydantic_ai/_output.py::TextFunctionOutputProcessor.__init__",
    "pydantic_ai_slim/pydantic_ai/_output.py::OutputToolset.__init__",
    "pydantic_ai_slim/pydantic_ai/agent/__init__.py::Agent",
    "pydantic_ai_slim/pydantic_ai/agent/__init__.py::Agent.__init__",
    "pydantic_ai_slim/pydantic_ai/agent/__init__.py::Agent._get_instructions",
    "pydantic_ai_slim/pydantic_ai/agent/__init__.py::_AgentFunctionToolset.__init__",
    "pydantic_ai_slim/pydantic_ai/concurrency.py::ConcurrencyLimit",
    "pydantic_ai_slim/pydantic_ai/concurrency.py::ConcurrencyLimiter.__init__",
    "pydantic_ai_slim/pydantic_ai/mcp.py::MCPError.__init__",
    "pydantic_ai_slim/pydantic_ai/mcp.py::MCPServer",
    "pydantic_ai_slim/pydantic_ai/mcp.py::MCPServer.__init__",
    "pydantic_ai_slim/pydantic_ai/mcp.py::MCPServerStdio",
    "pydantic_ai_slim/pydantic_ai/mcp.py::MCPServerStdio.__init__",
    "pydantic_ai_slim/pydantic_ai/mcp.py::_MCPServerHTTP.__init__",
    "pydantic_ai_slim/pydantic_ai/mcp.py::MCPServerSSE",
    "pydantic_ai_slim/pydantic_ai/mcp.py::MCPServerStreamableHTTP",
    "pydantic_ai_slim/pydantic_ai/mcp.py::MCPServerConfig",
    "pydantic_ai_slim/pydantic_ai/mcp.py::_expand_env_vars",
    "pydantic_ai_slim/pydantic_ai/mcp.py::load_mcp_servers",
    "pydantic_ai_slim/pydantic_ai/messages.py::_mime_types",
    "pydantic_ai_slim/pydantic_ai/messages.py::AudioFormat",
    "pydantic_ai_slim/pydantic_ai/messages.py::ForceDownloadMode",
    "pydantic_ai_slim/pydantic_ai/messages.py::_multi_modal_content_identifier",
    "pydantic_ai_slim/pydantic_ai/messages.py::FileUrl",
    "pydantic_ai_slim/pydantic_ai/messages.py::FileUrl.__init__",
    "pydantic_ai_slim/pydantic_ai/messages.py::FileUrl.media_type",
    "pydantic_ai_slim/pydantic_ai/messages.py::FileUrl.identifier",
    "pydantic_ai_slim/pydantic_ai/messages.py::FileUrl._infer_media_type",
    "pydantic_ai_slim/pydantic_ai/messages.py::FileUrl.format",
    "pydantic_ai_slim/pydantic_ai/messages.py::VideoUrl.__init__",
    "pydantic_ai_slim/pydantic_ai/messages.py::VideoUrl._infer_media_type",
    "pydantic_ai_slim/pydantic_ai/messages.py::VideoUrl.format",
    "pydantic_ai_slim/pydantic_ai/messages.py::AudioUrl",
    "pydantic_ai_slim/pydantic_ai/messages.py::AudioUrl.__init__",
    "pydantic_ai_slim/pydantic_ai/messages.py::AudioUrl._infer_media_type",
    "pydantic_ai_slim/pydantic_ai/messages.py::AudioUrl.format",
    "pydantic_ai_slim/pydantic_ai/messages.py::ImageUrl.__init__",
    "pydantic_ai_slim/pydantic_ai/messages.py::ImageUrl._infer_media_type",
    "pydantic_ai_slim/pydantic_ai/messages.py::ImageUrl.format",
    "pydantic_ai_slim/pydantic_ai/messages.py::DocumentUrl.__init__",
    "pydantic_ai_slim/pydantic_ai/messages.py::DocumentUrl._infer_media_type",
    "pydantic_ai_slim/pydantic_ai/messages.py::DocumentUrl.format",
    "pydantic_ai_slim/pydantic_ai/messages.py::BinaryContent",
    "pydantic_ai_slim/pydantic_ai/messages.py::BinaryContent.media_type",
    "pydantic_ai_slim/pydantic_ai/messages.py::BinaryContent.__init__",
    "pydantic_ai_slim/pydantic_ai/messages.py::BinaryContent.from_path",
    "pydantic_ai_slim/pydantic_ai/messages.py::BinaryContent.identifier",
    "pydantic_ai_slim/pydantic_ai/messages.py::BinaryContent.format",
    "pydantic_ai_slim/pydantic_ai/messages.py::BinaryImage",
    "pydantic_ai_slim/pydantic_ai/messages.py::BinaryImage.__init__",
    "pydantic_ai_slim/pydantic_ai/messages.py::ToolReturn",
    "pydantic_ai_slim/pydantic_ai/messages.py::_document_format_lookup",
    "pydantic_ai_slim/pydantic_ai/messages.py::_audio_format_lookup",
    "pydantic_ai_slim/pydantic_ai/messages.py::_image_format_lookup",
    "pydantic_ai_slim/pydantic_ai/messages.py::_video_format_lookup",
    "pydantic_ai_slim/pydantic_ai/messages.py::BaseToolReturnPart.has_content",
    "pydantic_ai_slim/pydantic_ai/messages.py::ToolReturnPart",
    "pydantic_ai_slim/pydantic_ai/messages.py::BuiltinToolReturnPart",
    "pydantic_ai_slim/pydantic_ai/messages.py::ModelRequest",
    "pydantic_ai_slim/pydantic_ai/messages.py::TextPart",
    "pydantic_ai_slim/pydantic_ai/messages.py::TextPart.has_content",
    "pydantic_ai_slim/pydantic_ai/messages.py::ThinkingPart.has_content",
    "pydantic_ai_slim/pydantic_ai/messages.py::FilePart",
    "pydantic_ai_slim/pydantic_ai/messages.py::FilePart.has_content",
    "pydantic_ai_slim/pydantic_ai/messages.py::BaseToolCallPart.has_content",
    "pydantic_ai_slim/pydantic_ai/messages.py::ToolCallPart",
    "pydantic_ai_slim/pydantic_ai/messages.py::BuiltinToolCallPart",
    "pydantic_ai_slim/pydantic_ai/messages.py::ModelResponse",
    "pydantic_ai_slim/pydantic_ai/messages.py::ModelMessage",
    "pydantic_ai_slim/pydantic_ai/models/__init__.py::ModelRequestParameters",
    "pydantic_ai_slim/pydantic_ai/models/__init__.py::Model",
    "pydantic_ai_slim/pydantic_ai/models/__init__.py::Model.__init__",
    "pydantic_ai_slim/pydantic_ai/models/__init__.py::Model.request",
    "pydantic_ai_slim/pydantic_ai/models/__init__.py::Model._get_instructions",
    "pydantic_ai_slim/pydantic_ai/models/fallback.py::FallbackModel",
    "pydantic_ai_slim/pydantic_ai/models/fallback.py::FallbackModel.__init__",
    "pydantic_ai_slim/pydantic_ai/models/fallback.py::FallbackModel.request",
    "pydantic_ai_slim/pydantic_ai/models/google.py::GoogleModel.__init__",
    "pydantic_ai_slim/pydantic_ai/models/google.py::GoogleModel.request",
    "pydantic_ai_slim/pydantic_ai/models/google.py::GeminiStreamedResponse._handle_file_search_grounding_metadata_streaming",
    "pydantic_ai_slim/pydantic_ai/models/google.py::_extract_file_search_retrieved_contexts",
    "pydantic_ai_slim/pydantic_ai/models/openai.py::OpenAIChatModel.__init__",
    "pydantic_ai_slim/pydantic_ai/models/openai.py::OpenAIChatModel.request",
    "pydantic_ai_slim/pydantic_ai/models/openai.py::OpenAIChatModel._MapModelResponseContext._map_response_builtin_part",
    "pydantic_ai_slim/pydantic_ai/models/openai.py::OpenAIResponsesModel.__init__",
    "pydantic_ai_slim/pydantic_ai/models/openai.py::OpenAIResponsesModel.request",
    "pydantic_ai_slim/pydantic_ai/models/openrouter.py::_OpenRouterMaxPrice.request",
    "pydantic_ai_slim/pydantic_ai/models/openrouter.py::_BaseReasoningDetail.format",
    "pydantic_ai_slim/pydantic_ai/models/openrouter.py::_OpenRouterFileAnnotation",
    "pydantic_ai_slim/pydantic_ai/models/openrouter.py::OpenRouterModel",
    "pydantic_ai_slim/pydantic_ai/models/openrouter.py::OpenRouterModel.__init__",
    "pydantic_ai_slim/pydantic_ai/models/xai.py::XaiModel.__init__",
    "pydantic_ai_slim/pydantic_ai/models/xai.py::XaiModel._upload_file_to_xai",
    "pydantic_ai_slim/pydantic_ai/models/xai.py::XaiModel.request",
    "pydantic_ai_slim/pydantic_ai/retries.py::TenacityTransport.__init__",
    "pydantic_ai_slim/pydantic_ai/retries.py::AsyncTenacityTransport.__init__",
    "pydantic_ai_slim/pydantic_ai/ui/_web/app.py::CHAT_UI_VERSION",
    "pydantic_ai_slim/pydantic_ai/ui/_web/app.py::DEFAULT_HTML_URL",
    "pydantic_ai_slim/pydantic_ai/ui/_web/app.py::_get_cache_dir",
    "pydantic_ai_slim/pydantic_ai/ui/_web/app.py::_get_ui_html",
    "pydantic_ai_slim/pydantic_ai/ui/vercel_ai/response_types.py::BaseChunk",
    "pydantic_ai_slim/pydantic_ai/ui/vercel_ai/response_types.py::SourceDocumentChunk.media_type",
    "pydantic_ai_slim/pydantic_ai/ui/vercel_ai/response_types.py::FileChunk",
    "pydantic_ai_slim/pydantic_ai/ui/vercel_ai/response_types.py::FileChunk.media_type",
    "pydantic_evals/pydantic_evals/dataset.py::InputsT",
    "pydantic_evals/pydantic_evals/dataset.py::OutputT",
    "pydantic_evals/pydantic_evals/dataset.py::MetadataT",
    "pydantic_evals/pydantic_evals/dataset.py::Case.__init__",
    "pydantic_evals/pydantic_evals/dataset.py::Dataset",
    "pydantic_evals/pydantic_evals/dataset.py::Dataset.__init__",
    "pydantic_evals/pydantic_evals/dataset.py::Dataset.from_file",
    "pydantic_evals/pydantic_evals/dataset.py::_get_relative_path_reference",
    "pydantic_evals/pydantic_evals/evaluators/_run_evaluator.py::InputsT",
    "pydantic_evals/pydantic_evals/evaluators/_run_evaluator.py::OutputT",
    "pydantic_evals/pydantic_evals/evaluators/_run_evaluator.py::MetadataT",
    "pydantic_evals/pydantic_evals/evaluators/_run_evaluator.py::run_evaluator",
    "pydantic_graph/pydantic_graph/_utils.py::Unset",
    "pydantic_graph/pydantic_graph/_utils.py::run_in_executor",
    "pydantic_graph/pydantic_graph/persistence/file.py::FileStatePersistence",
    "pydantic_graph/pydantic_graph/persistence/file.py::FileStatePersistence.snapshot_node",
    "pydantic_graph/pydantic_graph/persistence/file.py::FileStatePersistence.snapshot_node_if_new",
    "pydantic_graph/pydantic_graph/persistence/file.py::FileStatePersistence.snapshot_end",
    "pydantic_graph/pydantic_graph/persistence/file.py::FileStatePersistence.record_run",
    "pydantic_graph/pydantic_graph/persistence/file.py::FileStatePersistence.load_next",
    "pydantic_graph/pydantic_graph/persistence/file.py::FileStatePersistence.should_set_types",
    "pydantic_graph/pydantic_graph/persistence/file.py::FileStatePersistence.set_types",
    "pydantic_graph/pydantic_graph/persistence/file.py::FileStatePersistence.load_all",
    "pydantic_graph/pydantic_graph/persistence/file.py::FileStatePersistence._load_sync",
    "pydantic_graph/pydantic_graph/persistence/file.py::FileStatePersistence._after_run_sync",
    "pydantic_graph/pydantic_graph/persistence/file.py::FileStatePersistence._save",
    "pydantic_graph/pydantic_graph/persistence/file.py::FileStatePersistence._save_sync",
    "pydantic_graph/pydantic_graph/persistence/file.py::FileStatePersistence._append_save",
    "pydantic_graph/pydantic_graph/persistence/file.py::FileStatePersistence._lock",
    "pydantic_graph/pydantic_graph/persistence/file.py::_file_append_check",
    "tests/conftest.py::sanitize_filename",
    "tests/conftest.py::TestEnv.__init__",
    "tests/conftest.py::allow_model_requests",
    "tests/conftest.py::create_module",
    "tests/conftest.py::document_content",
    "tests/conftest.py::openrouter_api_key",
    "tests/conftest.py::model",
    "tests/models/test_openrouter.py::test_openrouter_file_annotation",
    "tests/models/test_openrouter.py::test_openrouter_file_annotation_validation",
    "tests/test_concurrency.py::AsyncBarrier.__init__",
    "tests/test_concurrency.py::TestAgentConcurrency",
    "tests/test_concurrency.py::TestAgentConcurrency.test_agent_concurrency_limit",
    "tests/test_concurrency.py::TestAgentConcurrency.test_agent_concurrency_backpressure",
    "tests/test_concurrency.py::TestAgentConcurrency.test_agent_no_limit_by_default",
    "tests/test_concurrency.py::TestAgentConcurrency.test_agent_with_int_concurrency",
    "tests/test_concurrency.py::TestAgentConcurrency.test_agent_with_limiter_concurrency"
  ],
  "mutation_symbol_lines": 20,
  "mutation_symbol_kind": "function",
  "mutation_file_symbols": 35,
  "graph_node_count": 18010,
  "retrieval_top1_top2_gap": 0.145503,
  "retrieval_softmax_entropy": 4.1092,
  "retrieval_softmax_tau": 0.131054,
  "retrieval_effective_candidates": 17.26,
  "retrieval_top5_ratio": 0.6262,
  "retrieval_within95_count": 1,
  "retrieval_scored_symbols": 50,
  "retrieval_top1_score": 0.341654,
  "retrieval_top5_mean_score": 0.213945,
  "retrieval_budget_utilization": 1.0,
  "retrieval_file_concentration": 0.3158,
  "repo_name": "pydantic-ai",
  "category": "concurrency",
  "mutation_type": "condition_inversion",
  "source": "discovered"
}