```
FILE: pydantic_ai_slim/pydantic_ai/_json_schema.py
SEARCH:
    def __init__(self, schema: JsonSchema, *, strict: bool | None = None):
        super().__init__(schema, strict=strict, prefer_inlined_defs=True)
REPLACE:
    def __init__(self, schema: JsonSchema, *, strict: bool | None = None, simplify_nullable_unions: bool = False):
        super().__init__(schema, strict=strict, prefer_inlined_defs=True)
        self.simplify_nullable_unions = simplify_nullable_unions
```

```
FILE: pydantic_ai_slim/pydantic_ai/models/test.py
SEARCH:
        return self._gen_any(self.schema)
REPLACE:
        if self.schema.get('anyOf') and self.simplify_nullable_unions:
            types = [s.get('type') for s in self.schema['anyOf'] if 'type' in s]
            if 'null' in types and len(types) == 2:
                return {'type': types[0], 'nullable': True}
        return self._gen_any(self.schema)
```