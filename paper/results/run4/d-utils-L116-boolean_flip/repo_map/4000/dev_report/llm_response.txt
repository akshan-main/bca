```
FILE: pydantic_ai_slim/pydantic_ai/_utils.py
SEARCH:
    if not isinstance(schema, dict) or schema.get('type') != 'object':
        raise UserError("Invalid schema: must be an object schema.")
REPLACE:
    if not isinstance(schema, dict) or schema.get('type') != 'object' and '$defs' not in schema:
        raise UserError("Invalid schema: must be an object schema.")
```