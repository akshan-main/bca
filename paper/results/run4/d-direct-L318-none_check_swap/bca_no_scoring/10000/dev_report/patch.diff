FILE: tests/test_direct.py
SEARCH:
    with model_request_stream_sync('test', [ModelRequest.user_text_prompt('x')]) as stream:
REPLACE:
    with model_request_stream_sync('test', [ModelRequest.user_text_prompt('x')]) as stream:
        await stream.get()  # Ensure the stream is consumed to produce events
