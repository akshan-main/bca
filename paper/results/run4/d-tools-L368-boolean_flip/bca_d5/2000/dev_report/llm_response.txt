```
FILE: pydantic_ai_slim/pydantic_ai/agent/__init__.py
SEARCH:
    def tool(self, func: Optional[Callable] = None) -> Callable:
REPLACE:
    def tool(self, func: Optional[Callable] = None, takes_ctx: bool = False) -> Callable:
```

```
FILE: pydantic_ai_slim/pydantic_ai/agent/__init__.py
SEARCH:
        self._function_toolset.add_function(
REPLACE:
        self._function_toolset.add_function(takes_ctx=takes_ctx, 
```

```
FILE: tests/test_tools.py
SEARCH:
    @agent.tool
REPLACE:
    @agent.tool(takes_ctx=False)
```