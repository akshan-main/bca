```
FILE: tests/test_concurrency.py
SEARCH:
    async def test_waiting_count_tracking(self):
        """Test that waiting_count is accurately tracked."""
        limiter = ConcurrencyLimiter(max_running=1)
        started = anyio.Event()
        release = anyio.Event()
    
        async def holder():
            async with get_concurrency_context(limiter, 'test'):
                started.set()
                await release.wait()
    
        async def waiter():
            async with get_concurrency_context(limiter, 'test'):
                pass
    
        async with anyio.create_task_group() as tg:
            tg.start_soon(holder)
            await started.wait()
    
            # Now limiter is held, check waiting count as we add waiters
            assert limiter.waiting_count == 0
REPLACE:
    async def test_waiting_count_tracking(self):
        """Test that waiting_count is accurately tracked."""
        limiter = ConcurrencyLimiter(max_running=1)
        started = anyio.Event()
        release = anyio.Event()
    
        async def holder():
            async with get_concurrency_context(limiter, 'test'):
                started.set()
                await release.wait()
    
        async def waiter():
            async with get_concurrency_context(limiter, 'test'):
                pass
    
        async with anyio.create_task_group() as tg:
            tg.start_soon(holder)
            await started.wait()
    
            # Now limiter is held, check waiting count as we add waiters
            tg.start_soon(waiter)
            await anyio.sleep(0.1)  # Allow some time for the waiter to be added
            assert limiter.waiting_count == 1
```