'enable_citations': True}
        with pytest.warns(DeprecationWarning, match='Use `WebFetchTool` instead.'):
>           result = adapter.validate_python(old_payload)

tests/test_builtin_tools.py:85: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../anaconda3/envs/vvenv/lib/python3.11/site-packages/pydantic/type_adapter.py:412: in validate_python
    return self.validator.validate_python(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

tool_data = {'enable_citations': True, 'kind': 'url_context', 'max_uses': 5}

    def _tool_discriminator(tool_data: dict[str, Any] | AbstractBuiltinTool) -> str:
        if not isinstance(tool_data, dict):
            return tool_data.get('kind', AbstractBuiltinTool.kind)
        else:
>           return tool_data.kind
E           AttributeError: 'dict' object has no attribute 'kind'

pydantic_ai_slim/pydantic_ai/builtin_tools.py:472: AttributeError

During handling of the above exception, another exception occurred:

    def test_url_context_tool_backward_compatibility():
        """Test that old payloads with 'url_context' kind can be deserialized."""
        adapter = TypeAdapter(AbstractBuiltinTool)
    
        # Test 1: Old payload with url_context should deserialize to UrlContextTool (which is deprecated)
        old_payload = {'kind': 'url_context', 'max_uses': 5, 'enable_citations': True}
>       with pytest.warns(DeprecationWarning, match='Use `WebFetchTool` instead.'):
E       Failed: DID NOT WARN. No warnings of type (<class 'DeprecationWarning'>,) were emitted.
E        Emitted warnings: [].

tests/test_builtin_tools.py:84: Failed
=========================== short test summary info ============================
FAILED tests/test_builtin_tools.py::test_url_context_tool_backward_compatibility
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!
=================== 1 failed, 1 passed, 30 skipped in 0.46s ====================

/Users/akshankrithick/anaconda3/envs/vvenv/lib/python3.11/site-packages/pytest_asyncio/plugin.py:247: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))