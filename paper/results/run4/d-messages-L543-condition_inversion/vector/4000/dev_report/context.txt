# pydantic_ai_slim/pydantic_ai/messages.py:475-475
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:1300-1300
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:1270-1270
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:1067-1067
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:1033-1033
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:1105-1105
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:754-754
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:1280-1280
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:909-909
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:953-953
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:370-370
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:899-899
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:416-416
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:137-137
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/embeddings/result.py:59-59
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:1157-1157
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:264-264
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:1565-1565
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:323-323
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/ui/vercel_ai/_event_stream.py:79-79
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/run.py:450-450
    _: dataclasses.KW_ONLY

# pydantic_ai_slim/pydantic_ai/toolsets/fastmcp.py:69-69
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/_agent_graph.py:185-185
    _: dataclasses.KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:2008-2008
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/ui/_adapter.py:123-123
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:177-177
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:1982-1982
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:693-693
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:836-836
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/ui/vercel_ai/_adapter.py:78-78
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:1207-1207
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/models/function.py:250-250
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:2034-2034
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/messages.py:2050-2050
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/models/mcp_sampling.py:39-39
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/tools.py:184-184
    _: KW_ONLY

# pydantic_ai_slim/pydantic_ai/common_tools/duckduckgo.py:45-45
    _: KW_ONLY

# tests/conftest.py:136-138
def _(value: datetime):  # pragma: no cover
    """Use IsDatetime() for datetime values in snapshots."""
    return 'IsDatetime()'

# tests/models/test_model_function.py:327-328
async def foo(_: RunContext[None], x: int) -> str:
    return str(x + 1)

# tests/models/test_bedrock.py:91-92
    def count_tokens(self, **_: Any) -> None:
        raise self._error

# tests/models/test_bedrock.py:85-86
    def converse(self, **_: Any) -> None:
        raise self._error

# pydantic_ai_slim/pydantic_ai/messages.py:533-549
    def from_path(cls, path: PathLike[str]) -> BinaryContent:
        """Create a `BinaryContent` from a path.

        Defaults to 'application/octet-stream' if the media type cannot be inferred.

        Raises:
            FileNotFoundError: if the file does not exist.
            PermissionError: if the file cannot be read.
        """
        path = Path(path)
        if path.exists():
            raise FileNotFoundError(f'File not found: {path}')
        media_type, _ = _mime_types.guess_type(path)
        if media_type is None:
            media_type = 'application/octet-stream'

        return cls.narrow_type(cls(data=path.read_bytes(), media_type=media_type))

# pydantic_ai_slim/pydantic_ai/mcp.py:937-950
    def __get_pydantic_core_schema__(cls, _: Any, __: Any) -> CoreSchema:
        return core_schema.no_info_after_validator_function(
            lambda dct: MCPServerStdio(**dct),
            core_schema.typed_dict_schema(
                {
                    'command': core_schema.typed_dict_field(core_schema.str_schema()),
                    'args': core_schema.typed_dict_field(core_schema.list_schema(core_schema.str_schema())),
                    'env': core_schema.typed_dict_field(
                        core_schema.dict_schema(core_schema.str_schema(), core_schema.str_schema()),
                        required=False,
                    ),
                }
            ),
        )

# pydantic_ai_slim/pydantic_ai/mcp.py:1247-1258
    def __get_pydantic_core_schema__(cls, _: Any, __: Any) -> CoreSchema:
        return core_schema.no_info_after_validator_function(
            lambda dct: MCPServerStreamableHTTP(**dct),
            core_schema.typed_dict_schema(
                {
                    'url': core_schema.typed_dict_field(core_schema.str_schema()),
                    'headers': core_schema.typed_dict_field(
                        core_schema.dict_schema(core_schema.str_schema(), core_schema.str_schema()), required=False
                    ),
                }
            ),
        )

# pydantic_ai_slim/pydantic_ai/mcp.py:1145-1156
    def __get_pydantic_core_schema__(cls, _: Any, __: Any) -> CoreSchema:
        return core_schema.no_info_after_validator_function(
            lambda dct: MCPServerSSE(**dct),
            core_schema.typed_dict_schema(
                {
                    'url': core_schema.typed_dict_field(core_schema.str_schema()),
                    'headers': core_schema.typed_dict_field(
                        core_schema.dict_schema(core_schema.str_schema(), core_schema.str_schema()), required=False
                    ),
                }
            ),
        )

# tests/models/test_bedrock.py:88-89
    def converse_stream(self, **_: Any) -> None:
        raise self._error

# tests/models/test_model_function.py:158-163
async def get_weather(_: RunContext[None], lat: int, lng: int):
    if (lat, lng) == (51, 0):
        # it always rains in London
        return 'Raining'
    else:
        return 'Sunny'

# tests/models/test_model_function.py:55-60
async def return_last(messages: list[ModelMessage], _: AgentInfo) -> ModelResponse:
    last = messages[-1].parts[-1]
    response = asdict(last)
    response.pop('timestamp', None)
    response['message_count'] = len(messages)
    return ModelResponse(parts=[TextPart(' '.join(f'{k}={v!r}' for k, v in response.items()))])

# tests/models/test_model_function.py:232-241
async def call_function_model(messages: list[ModelMessage], _: AgentInfo) -> ModelResponse:  # pragma: lax no cover
    last = messages[-1].parts[-1]
    if isinstance(last, UserPromptPart):
        if isinstance(last.content, str) and last.content.startswith('{'):
            details = json.loads(last.content)
            return ModelResponse(parts=[ToolCallPart(details['function'], json.dumps(details['arguments']))])
    elif isinstance(last, ToolReturnPart):
        return ModelResponse(parts=[TextPart(pydantic_core.to_json(last).decode())])

    raise ValueError(f'Unexpected message: {last}')

# tests/models/test_model_function.py:475-477
async def stream_text_function(_messages: list[ModelMessage], _: AgentInfo) -> AsyncIterator[str]:
    yield 'hello '
    yield 'world'

# tests/models/test_model_function.py:540-542
async def stream_text_function_empty(_messages: list[ModelMessage], _: AgentInfo) -> AsyncIterator[str]:
    if False:
        yield 'hello '

# tests/test_a2a.py:42-45
def return_string(_: list[ModelMessage], info: AgentInfo) -> ModelResponse:
    assert info.output_tools is not None
    args_json = '{"response": ["foo", "bar"]}'
    return ModelResponse(parts=[ToolCallPart(info.output_tools[0].name, args_json)])

# tests/test_a2a.py:58-61
def return_pydantic_model(_: list[ModelMessage], info: AgentInfo) -> ModelResponse:
    assert info.output_tools is not None
    args_json = '{"name": "John Doe", "age": 30, "email": "john@example.com"}'
    return ModelResponse(parts=[ToolCallPart(info.output_tools[0].name, args_json)])

# pydantic_ai_slim/pydantic_ai/exceptions.py:56-71
    def __get_pydantic_core_schema__(cls, _: Any, __: Any) -> core_schema.CoreSchema:
        """Pydantic core schema to allow `ModelRetry` to be (de)serialized."""
        schema = core_schema.typed_dict_schema(
            {
                'message': core_schema.typed_dict_field(core_schema.str_schema()),
                'kind': core_schema.typed_dict_field(core_schema.literal_schema(['model-retry'])),
            }
        )
        return core_schema.no_info_after_validator_function(
            lambda dct: ModelRetry(dct['message']),
            schema,
            serialization=core_schema.plain_serializer_function_ser_schema(
                lambda x: {'message': x.message, 'kind': 'model-retry'},
                return_schema=schema,
            ),
        )

# tests/test_messages.py:692-741
def test_binary_content_from_path(tmp_path: Path):
    # test normal file
    test_xml_file = tmp_path / 'test.xml'
    test_xml_file.write_text('<think>about trains</think>', encoding='utf-8')
    binary_content = BinaryContent.from_path(test_xml_file)
    assert binary_content == snapshot(BinaryContent(data=b'<think>about trains</think>', media_type='application/xml'))

    # test non-existent file
    non_existent_file = tmp_path / 'non-existent.txt'
    with pytest.raises(FileNotFoundError, match='File not found:'):
        BinaryContent.from_path(non_existent_file)

    # test file with unknown media type
    test_unknown_file = tmp_path / 'test.unknownext'
    test_unknown_file.write_text('some content', encoding='utf-8')
    binary_content = BinaryContent.from_path(test_unknown_file)
    assert binary_content == snapshot(BinaryContent(data=b'some content', media_type='application/octet-stream'))

    # test string path
    test_txt_file = tmp_path / 'test.txt'
    test_txt_file.write_text('just some text', encoding='utf-8')
    string_path = test_txt_file.as_posix()
    binary_content = BinaryContent.from_path(string_path)  # pyright: ignore[reportArgumentType]
    assert binary_content == snapshot(BinaryContent(data=b'just some text', media_type='text/plain'))

    # test image file
    test_jpg_file = tmp_path / 'test.jpg'
    test_jpg_file.write_bytes(b'\xff\xd8\xff\xe0' + b'0' * 100)  # minimal JPEG header + padding
    binary_content = BinaryContent.from_path(test_jpg_file)
    assert binary_content == snapshot(
        BinaryImage(data=b'\xff\xd8\xff\xe0' + b'0' * 100, media_type='image/jpeg', _identifier='bc8d49')
    )

    # test yaml file
    test_yaml_file = tmp_path / 'config.yaml'
    test_yaml_file.write_text('key: value', encoding='utf-8')
    binary_content = BinaryContent.from_path(test_yaml_file)
    assert binary_content == snapshot(BinaryContent(data=b'key: value', media_type='application/yaml'))

    # test yml file (alternative extension)
    test_yml_file = tmp_path / 'docker-compose.yml'
    test_yml_file.write_text('version: "3"', encoding='utf-8')
    binary_content = BinaryContent.from_path(test_yml_file)
    assert binary_content == snapshot(BinaryContent(data=b'version: "3"', media_type='application/yaml'))

    # test toml file
    test_toml_file = tmp_path / 'pyproject.toml'
    test_toml_file.write_text('[project]\nname = "test"', encoding='utf-8')
    binary_content = BinaryContent.from_path(test_toml_file)
    assert binary_content == snapshot(BinaryContent(data=b'[project]\nname = "test"', media_type='application/toml'))

# clai/update_readme.py:6-6
import pytest

# docs/.hooks/test_snippets.py:8-8
import pytest

# scripts/check_cassettes.py:18-18
import pytest

# tests/conftest.py:20-20
import pytest

# tests/evals/test_dataset.py:9-9
import pytest

# tests/evals/test_evaluator_base.py:8-8
import pytest

# tests/evals/test_evaluator_common.py:6-6
import pytest

# tests/evals/test_evaluator_context.py:5-5
import pytest

# tests/evals/test_evaluator_spec.py:3-3
import pytest

# tests/evals/test_evaluators.py:6-6
import pytest

# tests/evals/test_llm_as_a_judge.py:3-3
import pytest

# tests/evals/test_multi_run.py:7-7
import pytest

# tests/evals/test_otel.py:5-5
import pytest

# tests/evals/test_render_numbers.py:3-3
import pytest

# tests/evals/test_report_evaluators.py:8-8
import pytest

# tests/evals/test_reporting.py:5-5
import pytest

# tests/evals/test_reports.py:5-5
import pytest

# tests/evals/test_utils.py:9-9
import pytest

# tests/ext/test_langchain.py:4-4
import pytest

# tests/graph/beta/test_broadcast_and_spread.py:7-7
import pytest

# tests/graph/beta/test_decisions.py:8-8
import pytest

# tests/graph/beta/test_edge_cases.py:8-8
import pytest

# tests/graph/beta/test_edge_labels.py:7-7
import pytest

# tests/graph/beta/test_graph_builder.py:7-7
import pytest

# tests/graph/beta/test_graph_edge_cases.py:9-9
import pytest

# tests/graph/beta/test_graph_execution.py:7-7
import pytest

# tests/graph/beta/test_graph_iteration.py:8-8
import pytest

# tests/graph/beta/test_joins_and_reducers.py:8-8
import pytest

# tests/graph/beta/test_mermaid_rendering.py:8-8
import pytest

# tests/graph/beta/test_parent_forks.py:3-3
import pytest

# tests/graph/beta/test_paths.py:7-7
import pytest

# tests/graph/beta/test_v1_v2_integration.py:8-8
import pytest

# tests/graph/test_file_persistence.py:8-8
import pytest

# tests/graph/test_graph.py:9-9
import pytest

# tests/graph/test_mermaid.py:11-11
import pytest

# tests/graph/test_persistence.py:9-9
import pytest

# tests/graph/test_state.py:6-6
import pytest

# tests/models/anthropic/conftest.py:8-8
import pytest

# tests/models/anthropic/test_output.py:18-18
import pytest

# tests/models/test_anthropic.py:14-14
import pytest

# tests/models/test_bedrock.py:7-7
import pytest

# tests/models/test_cerebras.py:5-5
import pytest

# tests/models/test_cohere.py:9-9
import pytest

# tests/models/test_deepseek.py:5-5
import pytest

# tests/models/test_download_item.py:1-1
import pytest

# tests/models/test_fallback.py:9-9
import pytest

# tests/models/test_gemini.py:15-15
import pytest

# tests/models/test_gemini_vertex.py:5-5
import pytest

# tests/models/test_google.py:14-14
import pytest

# tests/models/test_groq.py:13-13
import pytest

# tests/models/test_huggingface.py:11-11
import pytest

# tests/models/test_instrumented.py:8-8
import pytest

# tests/models/test_mcp_sampling.py:6-6
import pytest

# tests/models/test_mistral.py:11-11
import pytest

# tests/models/test_model.py:6-6
import pytest

# tests/models/test_model_function.py:8-8
import pytest

# tests/models/test_model_names.py:7-7
import pytest

# tests/models/test_model_test.py:11-11
import pytest

# tests/models/test_openai.py:14-14
import pytest

# tests/models/test_openrouter.py:6-6
import pytest

# tests/models/test_outlines.py:14-14
import pytest

# tests/models/test_xai.py:24-24
import pytest

# tests/profiles/test_anthropic.py:21-21
import pytest

# tests/profiles/test_openai.py:12-12
import pytest

# tests/providers/test_alibaba_provider.py:2-2
import pytest

# tests/providers/test_anthropic.py:3-3
import pytest

# tests/providers/test_azure.py:3-3
import pytest

# tests/providers/test_bedrock.py:3-3
import pytest

# tests/providers/test_cerebras.py:6-6
import pytest

# tests/providers/test_cohere.py:4-4
import pytest

# tests/providers/test_deepseek.py:4-4
import pytest

# tests/providers/test_fireworks.py:4-4
import pytest

# tests/providers/test_gateway.py:8-8
import pytest

# tests/providers/test_github.py:4-4
import pytest

# tests/providers/test_google_gla.py:4-4
import pytest

# tests/providers/test_google_vertex.py:11-11
import pytest

# tests/providers/test_grok.py:8-8
import pytest

# tests/providers/test_groq.py:6-6
import pytest

# tests/providers/test_heroku.py:4-4
import pytest

# tests/providers/test_huggingface.py:7-7
import pytest

# tests/providers/test_litellm.py:2-2
import pytest

# tests/providers/test_mistral.py:6-6
import pytest

# tests/providers/test_moonshotai.py:4-4
import pytest

# tests/providers/test_nebius.py:4-4
import pytest

# tests/providers/test_ollama.py:4-4
import pytest

# tests/providers/test_openai.py:2-2
import pytest

# tests/providers/test_openrouter.py:4-4
import pytest

# tests/providers/test_outlines.py:1-1
import pytest

# tests/providers/test_ovhcloud.py:4-4
import pytest

# tests/providers/test_provider_names.py:7-7
import pytest

# tests/providers/test_sambanova_provider.py:2-2
import pytest

# tests/providers/test_together.py:4-4
import pytest

# tests/providers/test_vercel.py:4-4
import pytest

# tests/providers/test_voyageai.py:3-3
import pytest

# tests/providers/test_xai.py:3-3
import pytest

# tests/test_a2a.py:7-7
import pytest

# tests/test_ag_ui.py:13-13
import pytest

# tests/test_agent.py:11-11
import pytest

# tests/test_agent_output_schemas.py:1-1
import pytest

# tests/test_builtin_tools.py:3-3
import pytest

# tests/test_cli.py:7-7
import pytest

# tests/test_concurrency.py:10-10
import pytest

# tests/test_dbos.py:14-14
import pytest

# tests/test_direct.py:7-7
import pytest

# tests/test_embeddings.py:10-10
import pytest

# tests/test_examples.py:16-16
import pytest

# tests/test_exceptions.py:6-6
import pytest

# tests/test_fastmcp.py:10-10
import pytest

# tests/test_format_as_xml.py:10-10
import pytest

# tests/test_history_processor.py:4-4
import pytest

# tests/test_json_body_serializer.py:3-3
import pytest

# tests/test_logfire.py:7-7
import pytest

# tests/test_mcp.py:12-12
import pytest

# tests/test_messages.py:5-5
import pytest

# tests/test_parts_manager.py:6-6
import pytest

# tests/test_prefect.py:12-12
import pytest

# tests/test_settings.py:3-3
import pytest

# tests/test_ssrf.py:7-7
import pytest

# tests/test_streaming.py:13-13
import pytest

# tests/test_temporal.py:12-12
import pytest

# tests/test_tenacity.py:12-12
import pytest

# tests/test_thinking_part.py:3-3
import pytest

# tests/test_tools.py:8-8
import pytest

# tests/test_toolsets.py:9-9
import pytest

# tests/test_ui.py:8-8
import pytest

# tests/test_ui_web.py:11-11
import pytest

# tests/test_usage_limits.py:8-8
import pytest

# tests/test_utils.py:10-10
import pytest

# tests/test_validation_context.py:3-3
import pytest

# tests/test_vercel_ai.py:7-7
import pytest

# pydantic_evals/pydantic_evals/dataset.py:539-577
    def from_file(
        cls,
        path: Path | str,
        fmt: Literal['yaml', 'json'] | None = None,
        custom_evaluator_types: Sequence[type[Evaluator[InputsT, OutputT, MetadataT]]] = (),
        custom_report_evaluator_types: Sequence[type[ReportEvaluator[InputsT, OutputT, MetadataT]]] = (),
    ) -> Self:
        """Load a dataset from a file.

        Args:
            path: Path to the file to load.
            fmt: Format of the file. If None, the format will be inferred from the file extension.
                Must be either 'yaml' or 'json'.
            custom_evaluator_types: Custom evaluator classes to use when deserializing the dataset.
                These are additional evaluators beyond the default ones.
            custom_report_evaluator_types: Custom report evaluator classes to use when deserializing the dataset.
                These are additional report evaluators beyond the default ones.

        Returns:
            A new Dataset instance loaded from the file.

        Raises:
            ValidationError: If the file cannot be parsed as a valid dataset.
            ValueError: If the format cannot be inferred from the file extension.
        """
        path = Path(path)
        fmt = cls._infer_fmt(path, fmt)

        raw = Path(path).read_text(encoding='utf-8')
        try:
            return cls.from_text(
                raw,
                fmt=fmt,
                custom_evaluator_types=custom_evaluator_types,
                custom_report_evaluator_types=custom_report_evaluator_types,
                default_name=path.stem,
            )
        except ValidationError as e:  # pragma: no cover
            raise ValueError(f'{path} contains data that does not match the schema for {cls.__name__}:\n{e}.') from e

# tests/models/xai_proto_cassettes.py:299-300
    def from_path(cls, path: Path) -> XaiProtoCassetteClient:
        return cls(cassette=XaiProtoCassette.load(path))

# pydantic_ai_slim/pydantic_ai/_a2a.py:14-29
from pydantic_ai import (
    AudioUrl,
    BinaryContent,
    DocumentUrl,
    ImageUrl,
    ModelMessage,
    ModelRequest,
    ModelRequestPart,
    ModelResponse,
    ModelResponsePart,
    TextPart,
    ThinkingPart,
    ToolCallPart,
    UserPromptPart,
    VideoUrl,
)

# tests/conftest.py:27-27
from pydantic_ai import Agent, BinaryContent, BinaryImage, Embedder

# tests/evals/test_llm_as_a_judge.py:7-7
from ..conftest import BinaryContent, try_import

# tests/models/test_mcp_sampling.py:9-9
from pydantic_ai import BinaryContent, ModelRequest, ModelResponse, SystemPromptPart, TextPart, UserPromptPart

# tests/test_fastmcp.py:15-15
from pydantic_ai.messages import BinaryContent

# clai/update_readme.py:4-4
from pathlib import Path

# docs/.hooks/algolia.py:6-6
from pathlib import Path

# docs/.hooks/main.py:6-6
from pathlib import Path

# docs/.hooks/snippets.py:5-5
from pathlib import Path