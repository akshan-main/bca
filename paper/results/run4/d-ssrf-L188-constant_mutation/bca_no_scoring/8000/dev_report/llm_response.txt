```
FILE: pydantic_ai_slim/pydantic_ai/_ssrf.py
SEARCH:
    def build_url_with_ip(resolved: ResolvedUrl) -> str:
        url = f"{'https' if resolved.is_https else 'http'}://{resolved.resolved_ip}"
        if resolved.port != (443 if resolved.is_https else 80):
            url += f":{resolved.port}"
        url += resolved.path
        return url
REPLACE:
    def build_url_with_ip(resolved: ResolvedUrl) -> str:
        url = f"{'https' if resolved.is_https else 'http'}://{resolved.resolved_ip}"
        if resolved.port != (443 if resolved.is_https else 80) and resolved.port is not None:
            url += f":{resolved.port}"
        url += resolved.path
        return url
```