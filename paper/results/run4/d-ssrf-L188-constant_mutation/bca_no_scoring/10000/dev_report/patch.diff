FILE: pydantic_ai_slim/pydantic_ai/_ssrf.py
SEARCH:
    def build_url_with_ip(resolved: ResolvedUrl) -> str:
        scheme = 'https' if resolved.is_https else 'http'
        port = resolved.port if resolved.port not in (80, 443) else ''
        return f"{scheme}://{resolved.resolved_ip}{port}/{resolved.path}"
REPLACE:
    def build_url_with_ip(resolved: ResolvedUrl) -> str:
        scheme = 'https' if resolved.is_https else 'http'
        port = f":{resolved.port}" if resolved.port not in (80, 443) else ''
        return f"{scheme}://{resolved.resolved_ip}{port}{resolved.path}"
