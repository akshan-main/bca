```
FILE: pydantic_ai_slim/pydantic_ai/direct.py
SEARCH:
    async_stream_cm = model_request_stream(
        model=model,
        messages=list(messages),
        model_settings=model_settings,
        model_request_parameters=model_request_parameters,
        instrument=instrument,
    )
REPLACE:
    async_stream_cm = model_request_stream(
        model=model,
        messages=list(messages),
        model_settings=model_settings or settings.ModelSettings(),  # Ensure model_settings is not None
        model_request_parameters=model_request_parameters,
        instrument=instrument,
    )
```