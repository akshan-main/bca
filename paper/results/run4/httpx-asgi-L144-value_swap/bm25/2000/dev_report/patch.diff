FILE: tests/test_asgi.py
SEARCH:
        await send({"type": "http.response.body", "body": b"", "more_body": False})
        # The ASGI spec says of the Disconnect message:
        # "Sent to the application when a HTTP connection is closed or if receive is
        # called after a response has been sent."
        # So if receive() is called again, the disconnect message should be received
        message = await receive()
REPLACE:
        await send({"type": "http.response.body", "body": b"", "more_body": True})
        message = await receive()
        disconnect = message.get("type") == "http.disconnect"
        message = await receive()
