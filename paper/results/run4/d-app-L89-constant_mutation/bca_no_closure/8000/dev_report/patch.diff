FILE: pydantic_ai_slim/pydantic_ai/_utils.py
SEARCH:
    async def _get_ui_html(html_source: str | Path | None = None) -> bytes:
REPLACE:
    async def _get_ui_html(html_source: str | Path | None = None, cache: bool = True) -> bytes:

FILE: pydantic_ai_slim/pydantic_ai/_utils.py
SEARCH:
    if html_source is not None:
        if isinstance(html_source, str) and html_source.startswith('http'):
            async with httpx.AsyncClient() as client:
                response = await client.get(html_source)
                response.raise_for_status()
                return response.content
REPLACE:
    if html_source is not None:
        if isinstance(html_source, str) and html_source.startswith('http'):
            if cache:
                # Check if cached version exists
                cache_file = _get_cache_dir() / f'url_{hashlib.sha256(html_source.encode()).hexdigest()}.html'
                if cache_file.exists():
                    return cache_file.read_bytes()
            async with httpx.AsyncClient() as client:
                response = await client.get(html_source)
                response.raise_for_status()
                if cache:
                    # Save to cache
                    cache_file.write_bytes(response.content)
                return response.content
