```
FILE: tests/test_ui_web.py
SEARCH:
    async def test_get_ui_html_custom_url_caching(monkeypatch: pytest.MonkeyPatch, tmp_path: Path):
        """Test that custom URLs are cached to filesystem and not re-fetched."""
        monkeypatch.setattr(app_module, '_get_cache_dir', lambda: tmp_path)
    
        test_content = b'<html>Cached Custom UI</html>'
        fetch_count = 0
    
        class MockResponse:
            content = test_content
    
            def raise_for_status(self) -> None:
                pass
    
        class MockAsyncClient:
            async def __aenter__(self) -> MockAsyncClient:
                return self
    
            async def __aexit__(self, *args: Any) -> None:
                pass
    
            async def get(self, url: str) -> MockResponse:
                nonlocal fetch_count
                fetch_count += 1
                return MockResponse()
    
        monkeypatch.setattr(app_module.httpx, 'AsyncClient', MockAsyncClient)
    
        result = await _get_ui_html(html_source='https://custom-cdn.example.com/ui/index.html')
    
        assert result == test_content
        cache_file: Path = tmp_path / f'{app_module.CHAT_UI_VERSION}.html'
        assert cache_file.exists()
        assert cache_file.read_bytes() == test_content
        assert fetch_count == 1
REPLACE:
    async def test_get_ui_html_custom_url_caching(monkeypatch: pytest.MonkeyPatch, tmp_path: Path):
        """Test that custom URLs are cached to filesystem and not re-fetched."""
        monkeypatch.setattr(app_module, '_get_cache_dir', lambda: tmp_path)
    
        test_content = b'<html>Cached Custom UI</html>'
        fetch_count = 0
    
        class MockResponse:
            content = test_content
    
            def raise_for_status(self) -> None:
                pass
    
        class MockAsyncClient:
            async def __aenter__(self) -> MockAsyncClient:
                return self
    
            async def __aexit__(self, *args: Any) -> None:
                pass
    
            async def get(self, url: str) -> MockResponse:
                nonlocal fetch_count
                fetch_count += 1
                return MockResponse()
    
        monkeypatch.setattr(app_module.httpx, 'AsyncClient', MockAsyncClient)
    
        result = await _get_ui_html(html_source='https://custom-cdn.example.com/ui/index.html')
    
        assert result == test_content
        cache_file: Path = tmp_path / f'{app_module.CHAT_UI_VERSION}.html'
        assert cache_file.exists()
        assert cache_file.read_bytes() == test_content
        assert fetch_count == 1
```