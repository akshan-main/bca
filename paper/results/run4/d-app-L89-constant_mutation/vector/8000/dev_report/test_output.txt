onkeypatch: pytest.MonkeyPatch, tmp_path: Path):
        """Test that custom URLs are cached to filesystem and not re-fetched."""
        monkeypatch.setattr(app_module, '_get_cache_dir', lambda: tmp_path)
    
        test_content = b'<html>Cached Custom UI</html>'
        fetch_count = 0
    
        class MockResponse:
            content = test_content
    
            def raise_for_status(self) -> None:
                pass
    
        class MockAsyncClient:
            async def __aenter__(self) -> MockAsyncClient:
                return self
    
            async def __aexit__(self, *args: Any) -> None:
                pass
    
            async def get(self, url: str) -> MockResponse:
                nonlocal fetch_count
                fetch_count += 1
                return MockResponse()
    
        monkeypatch.setattr(app_module.httpx, 'AsyncClient', MockAsyncClient)
    
        custom_url = 'https://my-internal-cdn.example.com/ui/cached.html'
    
        # First call should fetch from URL
        result1 = await _get_ui_html(html_source=custom_url)
        assert result1 == test_content
        assert fetch_count == 1
    
        # Verify cache file was created
        url_hash = hashlib.sha256(custom_url.encode()).hexdigest()[:16]
        cache_file = tmp_path / f'url_{url_hash}.html'
>       assert cache_file.exists()
E       AssertionError: assert False
E        +  where False = exists()
E        +    where exists = PosixPath('/private/var/folders/vz/02yk36wx3dz6dw661rcdxcxr0000gn/T/pytest-of-akshankrithick/pytest-215/test_get_ui_html_custom_url_ca0/url_8bbc8da2b8b6fbda.html').exists

tests/test_ui_web.py:512: AssertionError
=========================== short test summary info ============================
FAILED tests/test_ui_web.py::test_get_ui_html_custom_url_caching - AssertionE...
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!
========================= 1 failed, 27 passed in 0.65s =========================

/Users/akshankrithick/anaconda3/envs/vvenv/lib/python3.11/site-packages/pytest_asyncio/plugin.py:247: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))