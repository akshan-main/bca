FILE: tests/test_decoders.py
SEARCH:
    def test_multi():
        body = b"test 123"
    
        deflate_compressor = zlib.compressobj(9, zlib.DEFLATED, -zlib.MAX_WBITS)
        compressed_body = deflate_compressor.compress(body) + deflate_compressor.flush()
    
        gzip_compressor = zlib.compressobj(9, zlib.DEFLATED, zlib.MAX_WBITS | 16)
        compressed_body = (
            gzip_compressor.compress(compressed_body) + gzip_compressor.flush()
        )
    
        headers = [(b"Content-Encoding", b"deflate, gzip")]
        response = httpx.Response(
            200,
            headers=headers,
            content=compressed_body,
        )
REPLACE:
    def test_multi():
        body = b"test 123"
    
        deflate_compressor = zlib.compressobj(9, zlib.DEFLATED, -zlib.MAX_WBITS)
        compressed_body = deflate_compressor.compress(body) + deflate_compressor.flush()
    
        gzip_compressor = zlib.compressobj(9, zlib.DEFLATED, zlib.MAX_WBITS | 16)
        compressed_body = (
            gzip_compressor.compress(compressed_body) + gzip_compressor.flush()
        )
    
        headers = [(b"Content-Encoding", b"deflate, gzip")]
        response = httpx.Response(
            200,
            headers=headers,
            content=io.BytesIO(compressed_body),
        )
