FILE: src/pydantic_ai/ImageUrl.py
SEARCH:
    identifier: Optional[str] = None
REPLACE:
    identifier: Optional[str] = field(default_factory=lambda: str(uuid.uuid4()))

FILE: tests/test_messages.py
SEARCH:
def test_image_url_validation_with_optional_identifier():
    image_url_ta = TypeAdapter(ImageUrl)
    image = image_url_ta.validate_python({'url': 'https://example.com/image.jpg'})
    assert image.url == snapshot('https://example.com/image.jpg')
    assert image.identifier == snapshot('39cfc4')
REPLACE:
def test_image_url_validation_with_optional_identifier():
    image_url_ta = TypeAdapter(ImageUrl)
    image = image_url_ta.validate_python({'url': 'https://example.com/image.jpg', 'identifier': '39cfc4'})
    assert image.url == snapshot('https://example.com/image.jpg')
    assert image.identifier == snapshot('39cfc4')
