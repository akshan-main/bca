FILE: httpx/_main.py
SEARCH:
    assert response.status_code == 200
REPLACE:
    assert response.status_code == 200, f"Unexpected status code: {response.status_code}"

FILE: httpx/_main.py
SEARCH:
                    download_response(response, download)
REPLACE:
                    download_response(response, download) if response.is_success else None
