FILE: pydantic_ai_slim/pydantic_ai/toolsets/function.py
SEARCH:
        def tool_decorator(
            func_: ToolFuncEither[AgentDepsT, ToolParams],
        ) -> ToolFuncEither[AgentDepsT, ToolParams]:
REPLACE:
        def tool_decorator(
            func_: ToolFuncEither[AgentDepsT, ToolParams],
        ) -> ToolFuncEither[AgentDepsT, ToolParams]:
            if isinstance(func_, dict) and 'anyOf' in func_:
                func_ = {'type': 'string', 'nullable': True}

FILE: pydantic_ai_slim/pydantic_ai/providers/anthropic.py
SEARCH:
        if self.strict is True:
REPLACE:
        if self.strict is True and 'nullable' in schema:
