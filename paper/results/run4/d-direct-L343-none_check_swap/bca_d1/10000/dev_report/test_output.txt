e)

    def get(self) -> messages.ModelResponse:
        """Build a ModelResponse from the data received from the stream so far."""
        if self._stream_response is None:
>           raise RuntimeError('Stream has not been initialized.')
E           RuntimeError: Stream has not been initialized.

pydantic_ai_slim/pydantic_ai/direct.py:383: RuntimeError

During handling of the above exception, another exception occurred:

    def test_model_request_stream_sync_without_context_manager():
        """Test that accessing properties or iterating without context manager raises RuntimeError."""
        messages: list[ModelMessage] = [ModelRequest.user_text_prompt('x')]
    
        expected_error_msg = re.escape(
            'StreamedResponseSync must be used as a context manager. Use: `with model_request_stream_sync(...) as stream:`'
        )
    
        stream_cm = model_request_stream_sync('test', messages)
    
        stream_repr = repr(stream_cm)
        assert 'StreamedResponseSync' in stream_repr
        assert 'context_entered=False' in stream_repr
    
        with pytest.raises(RuntimeError, match=expected_error_msg):
            _ = stream_cm.model_name
    
        with pytest.raises(RuntimeError, match=expected_error_msg):
            _ = stream_cm.timestamp
    
>       with pytest.raises(RuntimeError, match=expected_error_msg):
E       AssertionError: Regex pattern did not match.
E        Regex: 'StreamedResponseSync\\ must\\ be\\ used\\ as\\ a\\ context\\ manager\\.\\ Use:\\ `with\\ model_request_stream_sync\\(\\.\\.\\.\\)\\ as\\ stream:`'
E        Input: 'Stream has not been initialized.'

tests/test_direct.py:150: AssertionError
=========================== short test summary info ============================
FAILED tests/test_direct.py::test_model_request_stream_sync_without_context_manager
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!
========================= 1 failed, 5 passed in 0.36s ==========================

/Users/akshankrithick/anaconda3/envs/vvenv/lib/python3.11/site-packages/pytest_asyncio/plugin.py:247: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))