```
FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
            usage_limits: Optional limits on model request count or token usage.
            usage: Optional usage to start with, useful for resuming a conversation or agents used in tools.
REPLACE:
            usage_limits: Optional limits on model request count or token usage.
            usage: Optional usage to start with, useful for resuming a conversation or agents used in tools. The total_tokens should correctly add input and output tokens.
```

```
FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
            usage=usage,
REPLACE:
            usage=usage,  # Ensure total_tokens correctly adds input and output tokens
```

```
FILE: pydantic_ai_slim/pydantic_ai/durable_exec/temporal/_model.py
SEARCH:
        return self.response.provider_url  # pragma: no cover
REPLACE:
        return self.response.provider_url
```

```
FILE: tests/models/test_anthropic.py
SEARCH:
                output_tokens=23,
REPLACE:
                output_tokens=23,  # Ensure total_tokens correctly adds input and output tokens
```

```
FILE: tests/models/test_anthropic.py
SEARCH:
                output_tokens=56,
REPLACE:
                output_tokens=56,  # Ensure total_tokens correctly adds input and output tokens
```