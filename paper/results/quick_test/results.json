[
  {
    "task_id": "usage-total-tokens-math",
    "method": "grep",
    "budget": 1000,
    "query_type": "exact",
    "tokens_used": 981,
    "symbols_selected": 0,
    "files_included": 2,
    "assembly_time_ms": 1.4,
    "llm_time_ms": 5017.3,
    "llm_input_tokens": 1331,
    "llm_output_tokens": 313,
    "tests_passed": false,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: .github/set_docs_main_preview_url.py\nSEARCH:\nimport json\nimport os\nimport re\nimport typing\n\nimport httpx\nREPLACE:\nimport json\nimport os\nimport re\nimport typing\n\nimport httpx\n\nFILE: .github/set_docs_pr_preview_url.py\nSEARCH:\nimport os\nimport re\n\nimport httpx\nREPLACE:\nimport os\nimport re\n\nimport httpx\n\nFILE: .github/set_docs_main_preview_url.py\nSEARCH:\nr = httpx.post(deployment_url, headers=gh_headers, json=deployment_data)\nREPLACE:\nr = httpx.post(deployment_url, headers=gh_headers, json=deployment_data)\n\nFILE: .github/set_docs_pr_preview_url.py\nSEARCH:\nr = httpx.get(comments_url, headers=gh_headers)\nREPLACE:\nr = httpx.get(comments_url, headers=gh_headers)\n\nFILE: .github/set_docs_pr_preview_url.py\nSEARCH:\nr = httpx.post(comments_url, headers=gh_headers, json=comment_data)\nREPLACE:\nr = httpx.post(comments_url, headers=gh_headers, json=comment_data)\n\nFILE: .github/set_docs_pr_preview_url.py\nSEARCH:\nr = httpx.patch(comment_update_url, headers=gh_headers, json=comment_data)\nREPLACE:\nr = httpx.patch(comment_update_url, headers=gh_headers, json=comment_data)\n",
    "error": ""
  },
  {
    "task_id": "usage-total-tokens-math",
    "method": "bm25",
    "budget": 1000,
    "query_type": "exact",
    "tokens_used": 1000,
    "symbols_selected": 27,
    "files_included": 10,
    "assembly_time_ms": 162.4,
    "llm_time_ms": 1229.0,
    "llm_input_tokens": 1764,
    "llm_output_tokens": 44,
    "tests_passed": true,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        return self.input_tokens - self.output_tokens\nREPLACE:\n        return self.input_tokens + self.output_tokens\n",
    "error": ""
  },
  {
    "task_id": "usage-total-tokens-math",
    "method": "bca",
    "budget": 1000,
    "query_type": "exact",
    "tokens_used": 964,
    "symbols_selected": 4,
    "files_included": 2,
    "assembly_time_ms": 171.7,
    "llm_time_ms": 1981.5,
    "llm_input_tokens": 1133,
    "llm_output_tokens": 86,
    "tests_passed": true,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n    def total_tokens(self) -> int:\n        \"\"\"Sum of `input_tokens + output_tokens`.\"\"\"\n        return self.input_tokens - self.output_tokens\nREPLACE:\n    def total_tokens(self) -> int:\n        \"\"\"Sum of `input_tokens + output_tokens`.\"\"\"\n        return self.input_tokens + self.output_tokens\n",
    "error": ""
  },
  {
    "task_id": "usage-total-tokens-math",
    "method": "grep",
    "budget": 4000,
    "query_type": "exact",
    "tokens_used": 4000,
    "symbols_selected": 0,
    "files_included": 5,
    "assembly_time_ms": 1.3,
    "llm_time_ms": 2003.7,
    "llm_input_tokens": 4383,
    "llm_output_tokens": 97,
    "tests_passed": false,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: docs/.hooks/algolia.py\nSEARCH:\n    client.batch(\n        index_name=ALGOLIA_INDEX_NAME,\n        batch_write_params={'requests': [{'action': 'addObject', 'body': record} for record in filtered_records]},\n    )\nREPLACE:\n    client.batch(\n        index_name=ALGOLIA_INDEX_NAME,\n        requests=[{'action': 'addObject', 'body': record} for record in filtered_records],\n    )\n",
    "error": ""
  },
  {
    "task_id": "usage-total-tokens-math",
    "method": "bm25",
    "budget": 4000,
    "query_type": "exact",
    "tokens_used": 4000,
    "symbols_selected": 46,
    "files_included": 22,
    "assembly_time_ms": 274.8,
    "llm_time_ms": 569.3,
    "llm_input_tokens": 4886,
    "llm_output_tokens": 44,
    "tests_passed": true,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        return self.input_tokens - self.output_tokens\nREPLACE:\n        return self.input_tokens + self.output_tokens\n",
    "error": ""
  },
  {
    "task_id": "usage-total-tokens-math",
    "method": "bca",
    "budget": 4000,
    "query_type": "exact",
    "tokens_used": 3997,
    "symbols_selected": 45,
    "files_included": 32,
    "assembly_time_ms": 172.3,
    "llm_time_ms": 900.4,
    "llm_input_tokens": 4171,
    "llm_output_tokens": 45,
    "tests_passed": true,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        return self.input_tokens - self.output_tokens\nREPLACE:\n        return self.input_tokens + self.output_tokens\n",
    "error": ""
  },
  {
    "task_id": "usage-request-limit-off-by-one",
    "method": "grep",
    "budget": 1000,
    "query_type": "exact",
    "tokens_used": 981,
    "symbols_selected": 0,
    "files_included": 2,
    "assembly_time_ms": 0.8,
    "llm_time_ms": 4763.5,
    "llm_input_tokens": 1333,
    "llm_output_tokens": 43,
    "tests_passed": false,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: .github/set_docs_pr_preview_url.py\nSEARCH:\n<td><code>{REF:.7}</code></td>\nREPLACE:\n<td><code>{REF[:7]}</code></td>\n",
    "error": ""
  },
  {
    "task_id": "usage-request-limit-off-by-one",
    "method": "bm25",
    "budget": 1000,
    "query_type": "exact",
    "tokens_used": 1000,
    "symbols_selected": 28,
    "files_included": 14,
    "assembly_time_ms": 147.5,
    "llm_time_ms": 1142.7,
    "llm_input_tokens": 2033,
    "llm_output_tokens": 52,
    "tests_passed": true,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        if request_limit is not None and usage.requests > request_limit:\nREPLACE:\n        if request_limit is not None and usage.requests >= request_limit:\n",
    "error": ""
  },
  {
    "task_id": "usage-request-limit-off-by-one",
    "method": "bca",
    "budget": 1000,
    "query_type": "exact",
    "tokens_used": 915,
    "symbols_selected": 5,
    "files_included": 5,
    "assembly_time_ms": 161.9,
    "llm_time_ms": 2956.5,
    "llm_input_tokens": 1073,
    "llm_output_tokens": 52,
    "tests_passed": true,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        if request_limit is not None and usage.requests > request_limit:\nREPLACE:\n        if request_limit is not None and usage.requests >= request_limit:\n",
    "error": ""
  },
  {
    "task_id": "usage-request-limit-off-by-one",
    "method": "grep",
    "budget": 4000,
    "query_type": "exact",
    "tokens_used": 4000,
    "symbols_selected": 0,
    "files_included": 5,
    "assembly_time_ms": 1.3,
    "llm_time_ms": 6566.2,
    "llm_input_tokens": 4385,
    "llm_output_tokens": 335,
    "tests_passed": false,
    "test_output": "search text not found in docs/.hooks/main.py",
    "patch": "FILE: docs/.hooks/main.py\nSEARCH:\n    return re.sub(\n        r'\n(\\n\\n(?:\\d+\\..+?\\n)+?\\n)?',\n        lambda m: transform_gateway_code_block(m, relative_path),\n        markdown,\n        flags=re.MULTILINE | re.DOTALL,\n    )\nREPLACE:\n    return re.sub(\n        r'\n(\\n\\n(?:\\d+\\..+?\\n)+?\\n)?',\n        lambda m: transform_gateway_code_block(m, relative_path),\n        markdown,\n        flags=re.MULTILINE | re.DOTALL,\n    )\n\nFILE: docs/.hooks/main.py\nSEARCH:\n    if not first_element or not first_element.name or first_element.name not in ['h1', 'h2', 'h3']:\n        soup.insert(0, BeautifulSoup(f'<h1 id=\"{title}\">{title}</h1>', 'html.parser'))\nREPLACE:\n    if not first_element or not first_element.name or first_element.name not in ['h1', 'h2', 'h3']:\n        soup.insert(0, BeautifulSoup(f'<h1 id=\"{title}\">{title}</h1>', 'html.parser'))\n\nFILE: docs/.hooks/main.py\nSEARCH:\n    if len(content) > MAX_CONTENT_LENGTH:\nREPLACE:\n    if len(content) >= MAX_CONTENT_LENGTH:\n",
    "error": ""
  },
  {
    "task_id": "usage-request-limit-off-by-one",
    "method": "bm25",
    "budget": 4000,
    "query_type": "exact",
    "tokens_used": 4000,
    "symbols_selected": 37,
    "files_included": 18,
    "assembly_time_ms": 165.0,
    "llm_time_ms": 973.5,
    "llm_input_tokens": 3413,
    "llm_output_tokens": 52,
    "tests_passed": true,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        if request_limit is not None and usage.requests > request_limit:\nREPLACE:\n        if request_limit is not None and usage.requests >= request_limit:\n",
    "error": ""
  },
  {
    "task_id": "usage-request-limit-off-by-one",
    "method": "bca",
    "budget": 4000,
    "query_type": "exact",
    "tokens_used": 3798,
    "symbols_selected": 18,
    "files_included": 7,
    "assembly_time_ms": 702.7,
    "llm_time_ms": 1564.7,
    "llm_input_tokens": 3544,
    "llm_output_tokens": 52,
    "tests_passed": true,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        if request_limit is not None and usage.requests > request_limit:\nREPLACE:\n        if request_limit is not None and usage.requests >= request_limit:\n",
    "error": ""
  }
]