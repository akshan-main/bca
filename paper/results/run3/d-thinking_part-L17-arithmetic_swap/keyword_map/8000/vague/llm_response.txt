```
FILE: pydantic_ai_slim/pydantic_ai/_parts_manager.py
SEARCH:
                existing_text_part, part_index = existing_text_part_and_index
REPLACE:
                existing_text_part, part_index = existing_text_part_and_index
                existing_text_part.content += content
```

```
FILE: pydantic_ai_slim/pydantic_ai/_parts_manager.py
SEARCH:
            part_delta = TextPartDelta(
REPLACE:
            part_delta = TextPartDelta(
                content_delta=content,
```

```
FILE: pydantic_ai_slim/pydantic_ai/agent/__init__.py
SEARCH:
        self._output_validators.append(_output.OutputValidator[AgentDepsT, Any](func))
REPLACE:
        self._output_validators.append(_output.OutputValidator[AgentDepsT, Any](func))
        self._output_validators.append(_output.OutputValidator[AgentDepsT, Any](func))
```

```
FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
            if isinstance(part, ToolCallPart | BuiltinToolCallPart):
REPLACE:
            if isinstance(part, ToolCallPart | BuiltinToolCallPart) and part.tool_call_id is not None:
```

```
FILE: pydantic_ai_slim/pydantic_ai/embeddings/base.py
SEARCH:
        inputs = [inputs] if isinstance(inputs, str) else list(inputs)
REPLACE:
        inputs = [inputs] if isinstance(inputs, str) else list(inputs)
        inputs = [input for input in inputs if input]
```