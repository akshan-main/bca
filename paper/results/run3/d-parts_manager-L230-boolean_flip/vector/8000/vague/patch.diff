FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
        if infer_name and self.name is None:
            self._infer_name(inspect.currentframe())
REPLACE:
        if not infer_name or self.name is None:
            self._infer_name(inspect.currentframe())

FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
        if not yielded:
            raise exceptions.AgentRunError('Agent run finished without producing a final result')  # pragma: no cover
REPLACE:
        if yielded:
            raise exceptions.AgentRunError('Agent run finished without producing a final result')  # pragma: no cover
