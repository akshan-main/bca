```
FILE: pydantic_ai_slim/pydantic_ai/usage.py
SEARCH:
    input_tokens: int = 0
REPLACE:
    input_tokens: int = 0  # Ensure input_tokens is initialized correctly
```

```
FILE: pydantic_ai_slim/pydantic_ai/usage.py
SEARCH:
    def incr(self, incr_usage: RequestUsage) -> None:
        """Increment the usage in place.

        Args:
            incr_usage: The usage to increment by.
        """
        return _incr_usage_tokens(self, incr_usage)
REPLACE:
    def incr(self, incr_usage: RequestUsage) -> None:
        """Increment the usage in place.

        Args:
            incr_usage: The usage to increment by.
        """
        self.input_tokens += incr_usage.input_tokens
        self.output_tokens += incr_usage.output_tokens
```

```
FILE: pydantic_ai_slim/pydantic_ai/usage.py
SEARCH:
    def total_tokens(self) -> int:
        """Sum of `input_tokens + output_tokens`."""
        return self.input_tokens + self.output_tokens
REPLACE:
    def total_tokens(self) -> int:
        """Sum of `input_tokens + output_tokens`."""
        return max(0, self.input_tokens) + max(0, self.output_tokens)
```