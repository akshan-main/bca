FILE: pydantic_ai_slim/pydantic_ai/agent/__init__.py
SEARCH:
        if model is None or defer_model_check:
REPLACE:
        if model is not None and not defer_model_check:

FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
        if infer_name and self.name is None:
REPLACE:
        if not infer_name or self.name is not None:
