```
FILE: pydantic_ai_slim/pydantic_ai/embeddings/google.py
SEARCH:
    total_tokens = 0
REPLACE:
    total_tokens = response.embeddings[0].statistics.token_count if response.embeddings and response.embeddings[0].statistics else 0
```

```
FILE: pydantic_ai_slim/pydantic_ai/embeddings/voyageai.py
SEARCH:
    return RequestUsage(input_tokens=total_tokens)
REPLACE:
    return RequestUsage(input_tokens=total_tokens, output_tokens=0)
```

```
FILE: pydantic_ai_slim/pydantic_ai/models/xai.py
SEARCH:
    extracted = RequestUsage.extract(
REPLACE:
    extracted = RequestUsage.extract(
        dict(model=model, usage=usage_data),
        provider=provider,
        provider_url=provider_url,
        provider_fallback='x_ai',  # Pricing file is defined as x_ai.yml
        details=details or None,
        input_tokens=usage_data['prompt_tokens'] + usage_data.get('reasoning_tokens', 0),
        output_tokens=usage_data['completion_tokens'],
    )
```