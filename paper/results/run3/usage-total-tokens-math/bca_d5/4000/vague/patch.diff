FILE: pydantic_ai_slim/pydantic_ai/embeddings/result.py
SEARCH:
    provider_details: dict[str, Any] | None = None
REPLACE:
    provider_details: dict[str, Any] | None = None
    total_tokens: int = 0

FILE: pydantic_ai_slim/pydantic_ai/embeddings/result.py
SEARCH:
        return calc_price(
REPLACE:
        return calc_price(
            self.usage,
            self.model_name,
            provider_id=self.provider_name,
            genai_request_timestamp=self.timestamp,
            total_tokens=self.usage.input_tokens + self.usage.output_tokens,  # Add total tokens calculation
        )
