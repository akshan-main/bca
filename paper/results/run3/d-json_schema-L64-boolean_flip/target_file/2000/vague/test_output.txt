schema_defs_not_modified():
        """Test that the original schema $defs are not modified during transformation."""
    
        # Create a concrete subclass for testing
        class TestTransformer(JsonSchemaTransformer):
            def transform(self, schema: dict[str, Any]) -> dict[str, Any]:
                return schema
    
        # Create a schema with $defs that should not be modified
        original_schema = {
            'type': 'object',
            'properties': {'value': {'$ref': '#/$defs/TestUnion'}},
            '$defs': {
                'TestUnion': {
                    'anyOf': [
                        {'type': 'string'},
                        {'type': 'number'},
                    ],
                    'title': 'TestUnion',
                }
            },
        }
    
        # Keep a deepcopy to compare against later
        original_schema_copy = deepcopy(original_schema)
    
        # Transform the schema
        transformer = TestTransformer(original_schema)
        result = transformer.walk()
    
        # Verify the original schema was not modified
        assert original_schema == original_schema_copy
    
        # Verify the result is correct
>       assert result == original_schema_copy
E       AssertionError: assert {'properties'...pe': 'object'} == {'$defs': {'T...pe': 'object'}
E         
E         Omitting 2 identical items, use -vv to show
E         Right contains 1 more item:
E         {'$defs': {'TestUnion': {'anyOf': [{'type': 'string'}, {'type': 'number'}],
E                                  'title': 'TestUnion'}}}
E         Use -v to get more diff

tests/test_json_schema.py:89: AssertionError
=========================== short test summary info ============================
FAILED tests/test_json_schema.py::test_schema_defs_not_modified - AssertionEr...
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!
========================= 1 failed, 1 passed in 0.58s ==========================

/Users/akshankrithick/anaconda3/envs/vvenv/lib/python3.11/site-packages/pytest_asyncio/plugin.py:247: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))