{
  "task_id": "d-usage-L241-arithmetic_swap",
  "method": "bm25",
  "budget": 4000,
  "query_type": "exact",
  "tokens_used": 4000,
  "symbols_selected": 87,
  "files_included": 39,
  "assembly_time_ms": 288.2,
  "llm_time_ms": 2060.5,
  "llm_input_tokens": 5776,
  "llm_output_tokens": 62,
  "tests_passed": true,
  "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
  "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        slf.details[key] = slf.details.get(key, 0) - value\nREPLACE:\n        slf.details[key] = slf.details.get(key, 0) + value\n",
  "error": "",
  "test_time_ms": 1692.8,
  "failure_mode": "pass",
  "target_file_hit": true,
  "target_symbol_hit": false,
  "context_patch_overlap": 0.027,
  "patch_files_changed": 1,
  "patch_lines_changed": 1,
  "edit_distance_lines": 0,
  "entity_count_extracted": 3,
  "entity_count_mapped": 65,
  "query_identifier_density": 0.0,
  "seed_symbol_keys": [
    "pydantic_ai_slim/pydantic_ai/usage.py::_annotations",
    "pydantic_ai_slim/pydantic_ai/usage.py::dataclasses",
    "pydantic_ai_slim/pydantic_ai/usage.py::copy",
    "pydantic_ai_slim/pydantic_ai/usage.py::dataclass",
    "pydantic_ai_slim/pydantic_ai/usage.py::fields",
    "pydantic_ai_slim/pydantic_ai/usage.py::Annotated",
    "pydantic_ai_slim/pydantic_ai/usage.py::Any",
    "pydantic_ai_slim/pydantic_ai/usage.py::get_snapshot",
    "pydantic_ai_slim/pydantic_ai/usage.py::AliasChoices",
    "pydantic_ai_slim/pydantic_ai/usage.py::BeforeValidator",
    "pydantic_ai_slim/pydantic_ai/usage.py::Field",
    "pydantic_ai_slim/pydantic_ai/usage.py::deprecated",
    "pydantic_ai_slim/pydantic_ai/usage.py::overload",
    "pydantic_ai_slim/pydantic_ai/usage.py::_utils",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageLimitExceeded",
    "pydantic_ai_slim/pydantic_ai/usage.py::__all__",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageBase",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageBase.input_tokens",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageBase.cache_write_tokens",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageBase.cache_read_tokens",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageBase.output_tokens",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageBase.input_audio_tokens",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageBase.cache_audio_read_tokens",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageBase.output_audio_tokens",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageBase.details",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageBase.request_tokens",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageBase.response_tokens",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageBase.total_tokens",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageBase.opentelemetry_attributes",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageBase.__repr__",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageBase.has_values",
    "pydantic_ai_slim/pydantic_ai/usage.py::RequestUsage",
    "pydantic_ai_slim/pydantic_ai/usage.py::RequestUsage.requests",
    "pydantic_ai_slim/pydantic_ai/usage.py::RequestUsage.incr",
    "pydantic_ai_slim/pydantic_ai/usage.py::RequestUsage.__add__",
    "pydantic_ai_slim/pydantic_ai/usage.py::RequestUsage.extract",
    "pydantic_ai_slim/pydantic_ai/usage.py::RunUsage",
    "pydantic_ai_slim/pydantic_ai/usage.py::RunUsage.requests",
    "pydantic_ai_slim/pydantic_ai/usage.py::RunUsage.tool_calls",
    "pydantic_ai_slim/pydantic_ai/usage.py::RunUsage.input_tokens",
    "pydantic_ai_slim/pydantic_ai/usage.py::RunUsage.cache_write_tokens",
    "pydantic_ai_slim/pydantic_ai/usage.py::RunUsage.cache_read_tokens",
    "pydantic_ai_slim/pydantic_ai/usage.py::RunUsage.input_audio_tokens",
    "pydantic_ai_slim/pydantic_ai/usage.py::RunUsage.cache_audio_read_tokens",
    "pydantic_ai_slim/pydantic_ai/usage.py::RunUsage.output_tokens",
    "pydantic_ai_slim/pydantic_ai/usage.py::RunUsage.details",
    "pydantic_ai_slim/pydantic_ai/usage.py::RunUsage.incr",
    "pydantic_ai_slim/pydantic_ai/usage.py::RunUsage.__add__",
    "pydantic_ai_slim/pydantic_ai/usage.py::_incr_usage_tokens",
    "pydantic_ai_slim/pydantic_ai/usage.py::Usage",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageLimits",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageLimits.request_limit",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageLimits.tool_calls_limit",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageLimits.input_tokens_limit",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageLimits.output_tokens_limit",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageLimits.total_tokens_limit",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageLimits.count_tokens_before_request",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageLimits.request_tokens_limit",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageLimits.response_tokens_limit",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageLimits.__init__",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageLimits.has_token_limits",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageLimits.check_before_request",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageLimits.check_tokens",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageLimits.check_before_tool_call",
    "pydantic_ai_slim/pydantic_ai/usage.py::UsageLimits.__repr__"
  ],
  "mutation_symbol_key": "pydantic_ai_slim/pydantic_ai/usage.py::_incr_usage_tokens",
  "min_hops_seed_to_mutation": 0,
  "median_hops_seed_to_mutation": 2.0,
  "bca_closure_added_symbols": 0,
  "bca_closure_added_tokens": 0,
  "bca_frontier_visited": 0,
  "context_symbol_keys": [
    "examples/pydantic_ai_examples/flight_booking.py::FlightDetails",
    "examples/pydantic_ai_examples/flight_booking.py::Deps",
    "examples/pydantic_ai_examples/flight_booking.py::extraction_agent",
    "examples/pydantic_ai_examples/flight_booking.py::extract_flights",
    "examples/pydantic_ai_examples/flight_booking.py::usage_limits",
    "examples/pydantic_ai_examples/slack_lead_qualifier/slack.py::API_KEY",
    "pydantic_ai_slim/pydantic_ai/messages.py::ProviderDetailsDelta",
    "pydantic_ai_slim/pydantic_ai/messages.py::error_details_ta",
    "pydantic_ai_slim/pydantic_ai/messages.py::TextPart",
    "pydantic_ai_slim/pydantic_ai/messages.py::ThinkingPart",
    "pydantic_ai_slim/pydantic_ai/messages.py::ToolCallPart",
    "pydantic_ai_slim/pydantic_ai/messages.py::BuiltinToolCallPart",
    "pydantic_ai_slim/pydantic_ai/messages.py::ModelResponsePart",
    "pydantic_ai_slim/pydantic_ai/messages.py::ModelResponse",
    "pydantic_ai_slim/pydantic_ai/messages.py::ModelResponse.vendor_details",
    "pydantic_ai_slim/pydantic_ai/messages.py::TextPartDelta",
    "pydantic_ai_slim/pydantic_ai/messages.py::ThinkingPartDelta",
    "pydantic_ai_slim/pydantic_ai/messages.py::ToolCallPartDelta",
    "pydantic_ai_slim/pydantic_ai/messages.py::PartStartEvent",
    "pydantic_ai_slim/pydantic_ai/messages.py::PartDeltaEvent",
    "pydantic_ai_slim/pydantic_ai/messages.py::ModelResponseStreamEvent",
    "pydantic_ai_slim/pydantic_ai/models/__init__.py::Model",
    "pydantic_ai_slim/pydantic_ai/models/gemini.py::AuthProtocol.headers",
    "pydantic_ai_slim/pydantic_ai/models/gemini.py::ApiKeyAuth",
    "pydantic_ai_slim/pydantic_ai/models/gemini.py::ApiKeyAuth.headers",
    "pydantic_ai_slim/pydantic_ai/models/gemini.py::_GeminiFunctionCall.name",
    "pydantic_ai_slim/pydantic_ai/models/gemini.py::_GeminiFunctionResponse.name",
    "pydantic_ai_slim/pydantic_ai/models/gemini.py::_GeminiFunction.name",
    "pydantic_ai_slim/pydantic_ai/models/gemini.py::_GeminiModalityTokenCount",
    "pydantic_ai_slim/pydantic_ai/models/openai.py::OpenAIChatModel._process_provider_details",
    "pydantic_ai_slim/pydantic_ai/models/openai.py::OpenAIStreamedResponse._map_provider_details",
    "pydantic_ai_slim/pydantic_ai/models/openai.py::_map_logprobs",
    "pydantic_ai_slim/pydantic_ai/models/openai.py::_map_provider_details",
    "pydantic_ai_slim/pydantic_ai/models/openrouter.py::OpenRouterReasoning",
    "pydantic_ai_slim/pydantic_ai/models/openrouter.py::_OpenRouterReasoningDetail",
    "pydantic_ai_slim/pydantic_ai/models/openrouter.py::_OpenRouterCostDetails",
    "pydantic_ai_slim/pydantic_ai/models/openrouter.py::_OpenRouterPromptTokenDetails",
    "pydantic_ai_slim/pydantic_ai/models/openrouter.py::_OpenRouterCompletionTokenDetails",
    "pydantic_ai_slim/pydantic_ai/models/openrouter.py::_OpenRouterChatCompletion",
    "pydantic_ai_slim/pydantic_ai/models/openrouter.py::_map_openrouter_provider_details",
    "pydantic_ai_slim/pydantic_ai/models/openrouter.py::OpenRouterModel",
    "pydantic_ai_slim/pydantic_ai/models/openrouter.py::OpenRouterModel._process_provider_details",
    "pydantic_ai_slim/pydantic_ai/models/openrouter.py::_OpenRouterChatCompletionChunk",
    "pydantic_ai_slim/pydantic_ai/models/openrouter.py::OpenRouterStreamedResponse._map_provider_details",
    "pydantic_ai_slim/pydantic_ai/profiles/openai.py::_STRICT_INCOMPATIBLE_KEYS",
    "pydantic_ai_slim/pydantic_ai/tools.py::Tool",
    "pydantic_ai_slim/pydantic_ai/tools.py::Tool.name",
    "pydantic_ai_slim/pydantic_ai/tools.py::ToolDefinition.name",
    "pydantic_ai_slim/pydantic_ai/ui/vercel_ai/_utils.py::PROVIDER_METADATA_KEY",
    "pydantic_ai_slim/pydantic_ai/usage.py::RequestUsage.extract",
    "pydantic_ai_slim/pydantic_ai/usage.py::RunUsage",
    "pydantic_ai_slim/pydantic_ai/usage.py::Usage",
    "pydantic_evals/pydantic_evals/evaluators/spec.py::EvaluatorSpec.name",
    "pydantic_evals/pydantic_evals/evaluators/spec.py::_SerializedEvaluatorSpec.enforce_one_key",
    "pydantic_evals/pydantic_evals/otel/span_tree.py::SpanNode.name",
    "pydantic_evals/pydantic_evals/otel/span_tree.py::SpanNode.node_key",
    "pydantic_evals/pydantic_evals/otel/span_tree.py::SpanNode.parent_node_key",
    "tests/conftest.py::TestEnv",
    "tests/conftest.py::deepseek_api_key",
    "tests/conftest.py::openai_api_key",
    "tests/conftest.py::gemini_api_key",
    "tests/conftest.py::groq_api_key",
    "tests/conftest.py::anthropic_api_key",
    "tests/conftest.py::co_api_key",
    "tests/conftest.py::voyage_api_key",
    "tests/conftest.py::mistral_api_key",
    "tests/conftest.py::openrouter_api_key",
    "tests/conftest.py::huggingface_api_key",
    "tests/conftest.py::heroku_inference_key",
    "tests/conftest.py::cerebras_api_key",
    "tests/conftest.py::xai_api_key",
    "tests/conftest.py::xai_provider",
    "tests/conftest.py::model",
    "tests/graph/beta/test_joins_and_reducers.py::SimpleState",
    "tests/graph/beta/test_joins_and_reducers.py::test_reduce_dict_update",
    "tests/graph/beta/test_joins_and_reducers.py::test_reduce_dict_update_with_overlapping_keys",
    "tests/models/mock_xai.py::MockChatInstance.parent",
    "tests/models/test_mistral.py::MockSdkConfiguration.get_server_details",
    "tests/models/test_mistral.py::chunk",
    "tests/models/test_mistral.py::test_init",
    "tests/models/test_openrouter.py::test_openrouter_with_provider_details_but_no_parent_details",
    "tests/providers/test_alibaba_provider.py::test_alibaba_provider_env_key",
    "tests/providers/test_alibaba_provider.py::test_alibaba_provider_missing_key",
    "tests/providers/test_cohere.py::test_cohere_provider",
    "tests/providers/test_cohere.py::test_cohere_provider_need_api_key",
    "tests/providers/test_gateway.py::gateway_api_key",
    "tests/providers/test_github.py::test_github_provider",
    "tests/providers/test_github.py::test_github_provider_need_api_key",
    "tests/providers/test_google_gla.py::test_api_key_arg",
    "tests/providers/test_google_gla.py::test_api_key_env_var",
    "tests/providers/test_google_gla.py::test_api_key_not_set",
    "tests/providers/test_google_gla.py::test_api_key_empty",
    "tests/providers/test_grok.py::test_grok_provider",
    "tests/providers/test_grok.py::test_grok_provider_need_api_key",
    "tests/providers/test_groq.py::test_groq_provider",
    "tests/providers/test_groq.py::test_groq_provider_need_api_key",
    "tests/providers/test_heroku.py::test_heroku_provider",
    "tests/providers/test_heroku.py::test_heroku_provider_need_api_key",
    "tests/providers/test_litellm.py::test_init_without_api_key",
    "tests/providers/test_sambanova_provider.py::test_sambanova_provider_env_key",
    "tests/providers/test_together.py::test_together_provider",
    "tests/providers/test_together.py::test_together_provider_need_api_key",
    "tests/providers/test_xai.py::test_xai_provider",
    "tests/providers/test_xai.py::test_xai_provider_need_api_key",
    "tests/test_agent.py::Person.name",
    "tests/test_format_as_xml.py::ExampleDataclass.name",
    "tests/test_format_as_xml.py::ExamplePydanticModel.name",
    "tests/test_format_as_xml.py::ExamplePydanticFields.name",
    "tests/test_format_as_xml.py::test_invalid_key",
    "tests/test_usage_limits.py::test_add_usages",
    "tests/test_usage_limits.py::test_add_usages_with_none_detail_value"
  ],
  "mutation_symbol_lines": 18,
  "mutation_symbol_kind": "function",
  "mutation_file_symbols": 65,
  "graph_node_count": 18010,
  "retrieval_top1_top2_gap": 0.310394,
  "retrieval_softmax_entropy": 4.3187,
  "retrieval_softmax_tau": 43.375,
  "retrieval_effective_candidates": 19.95,
  "retrieval_top5_ratio": 0.9683,
  "retrieval_within95_count": 3,
  "retrieval_scored_symbols": 50,
  "retrieval_top1_score": 50.496807,
  "retrieval_top5_mean_score": 48.898296,
  "retrieval_budget_utilization": 1.0,
  "retrieval_file_concentration": 0.1494,
  "repo_name": "pydantic-ai",
  "category": "usage",
  "mutation_type": "arithmetic_swap",
  "source": "discovered"
}