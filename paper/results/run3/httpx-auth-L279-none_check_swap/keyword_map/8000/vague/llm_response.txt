```
FILE: httpx/_client.py
SEARCH:
    if value is not None and not isinstance(value, allowed[key]):
REPLACE:
    if value is None or not isinstance(value, allowed[key]):
```

```
FILE: httpx/_urls.py
SEARCH:
        if host.startswith("xn--"):
            host = idna.decode(host)
REPLACE:
        if host and host.startswith("xn--"):
            host = idna.decode(host)
```