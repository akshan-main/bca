FILE: pydantic_ai_slim/pydantic_ai/agent/__init__.py
SEARCH:
            if toolsets is not None:  # pragma: no cover
                raise TypeError('`mcp_servers` and `toolsets` cannot be set at the same time.')
REPLACE:
            if toolsets is not None and mcp_servers is not None:  # pragma: no cover
                raise TypeError('`mcp_servers` and `toolsets` cannot be set at the same time.')

FILE: pydantic_ai_slim/pydantic_ai/agent/__init__.py
SEARCH:
        if model is None or defer_model_check:
REPLACE:
        if model is None or defer_model_check or self._tool_calls_limit_reached():

FILE: pydantic_ai_slim/pydantic_ai/agent/__init__.py
SEARCH:
        if output_schema != self._output_schema or output_validators:
REPLACE:
        if output_schema != self._output_schema or output_validators or self._tool_calls_limit_reached():

FILE: pydantic_ai_slim/pydantic_ai/agent/__init__.py
SEARCH:
        if self._tool_calls_limit_reached():
            raise ToolCallLimitExceededError("Tool call limit has been reached.")
REPLACE:
        if self._tool_calls_limit_reached() and not self._allow_output_tools:
            raise ToolCallLimitExceededError("Tool call limit has been reached.")
