FILE: pydantic_ai_slim/pydantic_ai/agent/__init__.py
SEARCH:
        output_toolset: output_toolset if _utils.is_set(output_toolset) else self._output_toolset
REPLACE:
        output_toolset: output_toolset if _utils.is_set(output_toolset) else self._output_toolset or _usage.UsageLimits(output_tokens_limit=self.output_tokens_limit)

FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
    async def run_stream(  # noqa: C901
REPLACE:
    async def run_stream(self, output_tokens_limit: int | None = None,  # noqa: C901

FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
        output_type: OutputSpec[RunOutputDataT] | None = None,
REPLACE:
        output_type: OutputSpec[RunOutputDataT] | None = None,
        output_tokens_limit: int | None = None,

FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
        usage_limits: _usage.UsageLimits | None = None,
REPLACE:
        usage_limits: _usage.UsageLimits | None = None,
        output_tokens_limit: int | None = None,

FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
        if output_tokens_limit is not None:
REPLACE:
        if output_tokens_limit is not None and usage_limits is not None:

FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
        usage: _usage.RunUsage | None = None,
REPLACE:
        usage: _usage.RunUsage | None = None,
        output_tokens_limit: int | None = None,
