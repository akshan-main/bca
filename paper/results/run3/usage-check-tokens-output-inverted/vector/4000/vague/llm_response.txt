```
FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
        output_type: OutputSpec[RunOutputDataT] | None = None,
REPLACE:
        output_type: OutputSpec[RunOutputDataT] | None = None,
        output_tokens_limit: int | None = None,
```
```
FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
            usage_limits: _usage.UsageLimits | None = None,
REPLACE:
            usage_limits: _usage.UsageLimits | None = None,
            output_tokens_limit: output_tokens_limit,
```
```
FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
        async def run_stream(  # noqa: C901
REPLACE:
        async def run_stream(  # noqa: C901
            output_tokens_limit: int | None = None,
```
```
FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
        async def run_stream_sync(
REPLACE:
        async def run_stream_sync(
            output_tokens_limit: int | None = None,
```
```
FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
        async with self.run_stream(
REPLACE:
        async with self.run_stream(
            output_tokens_limit=output_tokens_limit,
```
```
FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
        async with self.iter(
REPLACE:
        async with self.iter(
            output_tokens_limit=output_tokens_limit,
```
```
FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
        if not yielded:
REPLACE:
        if not yielded or (output_tokens_limit is not None and len(result) > output_tokens_limit):
```