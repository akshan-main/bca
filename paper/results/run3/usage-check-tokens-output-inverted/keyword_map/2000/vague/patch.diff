FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
        raise NotImplementedError
REPLACE:
        if self.usage_limits and self.usage_limits.output_tokens_limit is not None:
            if self.usage_limits.output_tokens_limit <= 0:
                raise ValueError("Output tokens limit must be greater than zero.")
            # Implement logic to enforce output token limit here
        yield

FILE: pydantic_ai_slim/pydantic_ai/_cli/__init__.py
SEARCH:
            result = await agent.run(prompt, message_history=messages, deps=deps)
REPLACE:
            result = await agent.run(prompt, message_history=messages, deps=deps, usage_limits=usage_limits)
