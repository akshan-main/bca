FILE: httpx/_auth.py
SEARCH:
    def __init__(self, username: str | bytes, password: str | bytes) -> None:
        self._auth_header = self._build_auth_header(username, password)
REPLACE:
    def __init__(self, username: str | bytes, password: str | bytes) -> None:
        self._auth_header = self._build_auth_header(username, password)
        self._func = None  # Initialize _func to None

FILE: httpx/_auth.py
SEARCH:
    def auth_flow(self, request: Request) -> typing.Generator[Request, Response, None]:
        request.headers["Authorization"] = self._auth_header
        yield request
REPLACE:
    def auth_flow(self, request: Request) -> typing.Generator[Request, Response, None]:
        if self._func is not None:  # Check if _func is set
            yield self._func(request)
        else:
            request.headers["Authorization"] = self._auth_header
            yield request
