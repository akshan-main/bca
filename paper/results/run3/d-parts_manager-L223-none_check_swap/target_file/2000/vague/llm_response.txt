```
FILE: pydantic_ai_slim/pydantic_ai/_parts_manager.py
SEARCH:
            # If the vendor_part_id is None, check if the latest part is a TextPart to update
            existing_text_part_and_index = self._latest_part_if_of_type(TextPart)
        else:
            # Otherwise, attempt to look up an existing TextPart by vendor_part_id
REPLACE:
            # If the vendor_part_id is not None, check if the latest part is a TextPart to update
            existing_text_part_and_index = self._latest_part_if_of_type(TextPart) if vendor_part_id is not None else None
        if vendor_part_id is None:
            # Otherwise, attempt to look up an existing TextPart by vendor_part_id
```