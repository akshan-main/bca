```
FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
        if infer_name and self.name is None:
REPLACE:
        if not infer_name or self.name is not None:
```
```
FILE: pydantic_ai_slim/pydantic_ai/ag_ui.py
SEARCH:
    return await AGUIAdapter[AgentDepsT].dispatch_request(
REPLACE:
    if output_type is not None:
        return await AGUIAdapter[AgentDepsT].dispatch_request(
```