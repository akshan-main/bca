d 8 items

tests/test_auth.py ....F

=================================== FAILURES ===================================
__________________ test_digest_auth_setting_cookie_in_request __________________

    def test_digest_auth_setting_cookie_in_request():
        url = "https://www.example.com/auth"
        client = httpx.Client(transport=httpx.MockTransport(set_cookies))
        request = client.build_request("GET", url)
    
        auth = httpx.DigestAuth(username="user", password="pass")
        flow = auth.sync_auth_flow(request)
        request = next(flow)
        assert "Authorization" not in request.headers
    
>       response = client.get(url)

tests/test_auth.py:130: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
httpx/_client.py:1053: in get
    return self.request(
httpx/_client.py:825: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
httpx/_client.py:912: in send
    auth = self._build_request_auth(request, auth)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <httpx.Client object at 0x1042f9690>
request = <Request('GET', 'https://www.example.com/auth')>, auth = None

    def _build_request_auth(
        self,
        request: Request,
        auth: AuthTypes | UseClientDefault | None = USE_CLIENT_DEFAULT,
    ) -> Auth:
        auth = (
            self._auth if isinstance(auth, UseClientDefault) else self._build_auth(auth)
        )
    
        if auth is not None:
            return auth
    
        username, password = request.url.username, request.url.password
        if username or password:
            return BasicAuth(username=username, password=password)
    
>       return Auth(nonce_count=1)
E       TypeError: Auth() takes no arguments

httpx/_client.py:473: TypeError
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!
========================= 1 failed, 4 passed in 0.12s ==========================

/Users/akshankrithick/anaconda3/envs/vvenv/lib/python3.11/site-packages/pytest_asyncio/plugin.py:247: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))