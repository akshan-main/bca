```
FILE: pydantic_ai_slim/pydantic_ai/_utils.py
SEARCH:
    return any(isinstance(item, dict | list) and _contains_ref(item) for item in items)  # pyright: ignore[reportUnknownArgumentType]
REPLACE:
    return any(isinstance(item, dict | list) and _contains_ref(item) for item in items) and resolved.get('type') == 'object'  # pyright: ignore[reportUnknownArgumentType]
```