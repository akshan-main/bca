FILE: pydantic_ai_slim/pydantic_ai/agent/abstract.py
SEARCH:
        if infer_name and self.name is None:
REPLACE:
        if infer_name and self.name is not None:

FILE: pydantic_ai_slim/pydantic_ai/ag_ui.py
SEARCH:
    return await AGUIAdapter[AgentDepsT].dispatch_request(
REPLACE:
    return await AGUIAdapter[AgentDepsT].dispatch_request(
        request,
        agent=agent,
        deps=deps,
        output_type=output_type,
        message_history=message_history,
        deferred_tool_results=deferred_tool_results,
        model=model,
        model_settings=model_settings,
        usage_limits=usage_limits,
        usage=usage,
        metadata=metadata,
        infer_name=infer_name,
        toolsets=toolsets,
        on_complete=on_complete,
    )
