```
FILE: pydantic_graph/pydantic_graph/_utils.py
SEARCH:
            if back.f_globals.get('__name__') == 'typing':
                # If the class calling this function is generic, explicitly parameterizing the class
                # results in a `typing._GenericAlias` instance, which proxies instantiation calls to the
                # "real" class and thus adding an extra frame to the call. To avoid pulling anything
                # from the `typing` module, use the correct frame (the one before):
                return get_parent_namespace(back)
REPLACE:
            if back.f_globals.get('__name__') == 'typing' or (resolved := schema.get('$defs', {}).get(ref[len(prefix) :])):
```