[
  {
    "task_id": "usage-total-tokens-math",
    "method": "no_retrieval",
    "budget": 1000,
    "query_type": "exact",
    "tokens_used": 17,
    "symbols_selected": 0,
    "files_included": 0,
    "assembly_time_ms": 0.0,
    "llm_time_ms": 1134.2,
    "llm_input_tokens": 261,
    "llm_output_tokens": 30,
    "tests_passed": false,
    "test_output": "file not found: src/usage_base.py",
    "patch": "FILE: src/usage_base.py\nSEARCH:\nself.total_tokens -= output_tokens\nREPLACE:\nself.total_tokens += output_tokens\n",
    "error": "",
    "failure_mode": "patch_apply_fail",
    "target_file_hit": false,
    "patch_files_changed": 1,
    "patch_lines_changed": 1
  },
  {
    "task_id": "usage-total-tokens-math",
    "method": "bca",
    "budget": 1000,
    "query_type": "exact",
    "tokens_used": 964,
    "symbols_selected": 4,
    "files_included": 2,
    "assembly_time_ms": 163.8,
    "llm_time_ms": 929.1,
    "llm_input_tokens": 1133,
    "llm_output_tokens": 89,
    "tests_passed": false,
    "test_output": "search text not found in pydantic_ai_slim/pydantic_ai/usage.py",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        return self.input_tokens - self.output_tokens\nREPLACE:\n        return self.input_tokens + self.output_tokens\n\nFILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        return self.input_tokens - self.output_tokens\nREPLACE:\n        return self.input_tokens + self.output_tokens\n",
    "error": "",
    "failure_mode": "patch_apply_fail",
    "target_file_hit": true,
    "patch_files_changed": 1,
    "patch_lines_changed": 2
  },
  {
    "task_id": "usage-total-tokens-math",
    "method": "target_file",
    "budget": 1000,
    "query_type": "exact",
    "tokens_used": 1000,
    "symbols_selected": 0,
    "files_included": 1,
    "assembly_time_ms": 0.1,
    "llm_time_ms": 1025.8,
    "llm_input_tokens": 1145,
    "llm_output_tokens": 86,
    "tests_passed": true,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n    def total_tokens(self) -> int:\n        \"\"\"Sum of `input_tokens + output_tokens`.\"\"\"\n        return self.input_tokens - self.output_tokens\nREPLACE:\n    def total_tokens(self) -> int:\n        \"\"\"Sum of `input_tokens + output_tokens`.\"\"\"\n        return self.input_tokens + self.output_tokens\n",
    "error": "",
    "failure_mode": "pass",
    "target_file_hit": true,
    "patch_files_changed": 1,
    "patch_lines_changed": 3
  },
  {
    "task_id": "usage-total-tokens-math",
    "method": "no_retrieval",
    "budget": 4000,
    "query_type": "exact",
    "tokens_used": 17,
    "symbols_selected": 0,
    "files_included": 0,
    "assembly_time_ms": 0.0,
    "llm_time_ms": 933.4,
    "llm_input_tokens": 261,
    "llm_output_tokens": 32,
    "tests_passed": false,
    "test_output": "file not found: src/usage_base.py",
    "patch": "FILE: src/usage_base.py\nSEARCH:\n        self.total_tokens -= output_tokens\nREPLACE:\n        self.total_tokens += output_tokens\n",
    "error": "",
    "failure_mode": "patch_apply_fail",
    "target_file_hit": false,
    "patch_files_changed": 1,
    "patch_lines_changed": 1
  },
  {
    "task_id": "usage-total-tokens-math",
    "method": "bca",
    "budget": 4000,
    "query_type": "exact",
    "tokens_used": 3999,
    "symbols_selected": 59,
    "files_included": 40,
    "assembly_time_ms": 189.4,
    "llm_time_ms": 974.3,
    "llm_input_tokens": 4425,
    "llm_output_tokens": 44,
    "tests_passed": true,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        return self.input_tokens - self.output_tokens\nREPLACE:\n        return self.input_tokens + self.output_tokens\n",
    "error": "",
    "failure_mode": "pass",
    "target_file_hit": true,
    "patch_files_changed": 1,
    "patch_lines_changed": 1
  },
  {
    "task_id": "usage-total-tokens-math",
    "method": "target_file",
    "budget": 4000,
    "query_type": "exact",
    "tokens_used": 4000,
    "symbols_selected": 0,
    "files_included": 1,
    "assembly_time_ms": 0.1,
    "llm_time_ms": 2045.5,
    "llm_input_tokens": 3728,
    "llm_output_tokens": 44,
    "tests_passed": true,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        return self.input_tokens - self.output_tokens\nREPLACE:\n        return self.input_tokens + self.output_tokens\n",
    "error": "",
    "failure_mode": "pass",
    "target_file_hit": true,
    "patch_files_changed": 1,
    "patch_lines_changed": 1
  },
  {
    "task_id": "usage-request-limit-off-by-one",
    "method": "no_retrieval",
    "budget": 1000,
    "query_type": "exact",
    "tokens_used": 17,
    "symbols_selected": 0,
    "files_included": 0,
    "assembly_time_ms": 0.0,
    "llm_time_ms": 1263.7,
    "llm_input_tokens": 263,
    "llm_output_tokens": 38,
    "tests_passed": false,
    "test_output": "no edits extracted",
    "patch": "",
    "error": "",
    "failure_mode": "no_patch",
    "target_file_hit": false,
    "patch_files_changed": 0,
    "patch_lines_changed": 0
  },
  {
    "task_id": "usage-request-limit-off-by-one",
    "method": "bca",
    "budget": 1000,
    "query_type": "exact",
    "tokens_used": 915,
    "symbols_selected": 5,
    "files_included": 5,
    "assembly_time_ms": 221.2,
    "llm_time_ms": 1632.7,
    "llm_input_tokens": 1073,
    "llm_output_tokens": 52,
    "tests_passed": true,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        if request_limit is not None and usage.requests > request_limit:\nREPLACE:\n        if request_limit is not None and usage.requests >= request_limit:\n",
    "error": "",
    "failure_mode": "pass",
    "target_file_hit": true,
    "patch_files_changed": 1,
    "patch_lines_changed": 1
  },
  {
    "task_id": "usage-request-limit-off-by-one",
    "method": "target_file",
    "budget": 1000,
    "query_type": "exact",
    "tokens_used": 1000,
    "symbols_selected": 0,
    "files_included": 1,
    "assembly_time_ms": 0.1,
    "llm_time_ms": 4644.8,
    "llm_input_tokens": 1147,
    "llm_output_tokens": 72,
    "tests_passed": false,
    "test_output": "search text not found in pydantic_ai_slim/pydantic_ai/usage.py",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\nUsageLimits.check_before_request uses > instead of >= for the request limit check, allowing one extra request beyond the limit.\nREPLACE:\nUsageLimits.check_before_request uses >= instead of > for the request limit check, preventing any extra requests beyond the limit.\n",
    "error": "",
    "failure_mode": "patch_apply_fail",
    "target_file_hit": true,
    "patch_files_changed": 1,
    "patch_lines_changed": 1
  },
  {
    "task_id": "usage-request-limit-off-by-one",
    "method": "no_retrieval",
    "budget": 4000,
    "query_type": "exact",
    "tokens_used": 17,
    "symbols_selected": 0,
    "files_included": 0,
    "assembly_time_ms": 0.0,
    "llm_time_ms": 1089.7,
    "llm_input_tokens": 263,
    "llm_output_tokens": 34,
    "tests_passed": false,
    "test_output": "no edits extracted",
    "patch": "",
    "error": "",
    "failure_mode": "no_patch",
    "target_file_hit": false,
    "patch_files_changed": 0,
    "patch_lines_changed": 0
  },
  {
    "task_id": "usage-request-limit-off-by-one",
    "method": "bca",
    "budget": 4000,
    "query_type": "exact",
    "tokens_used": 3798,
    "symbols_selected": 18,
    "files_included": 7,
    "assembly_time_ms": 647.9,
    "llm_time_ms": 1170.4,
    "llm_input_tokens": 3544,
    "llm_output_tokens": 52,
    "tests_passed": true,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        if request_limit is not None and usage.requests > request_limit:\nREPLACE:\n        if request_limit is not None and usage.requests >= request_limit:\n",
    "error": "",
    "failure_mode": "pass",
    "target_file_hit": true,
    "patch_files_changed": 1,
    "patch_lines_changed": 1
  },
  {
    "task_id": "usage-request-limit-off-by-one",
    "method": "target_file",
    "budget": 4000,
    "query_type": "exact",
    "tokens_used": 4000,
    "symbols_selected": 0,
    "files_included": 1,
    "assembly_time_ms": 0.1,
    "llm_time_ms": 1220.8,
    "llm_input_tokens": 3730,
    "llm_output_tokens": 52,
    "tests_passed": true,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        if request_limit is not None and usage.requests > request_limit:\nREPLACE:\n        if request_limit is not None and usage.requests >= request_limit:\n",
    "error": "",
    "failure_mode": "pass",
    "target_file_hit": true,
    "patch_files_changed": 1,
    "patch_lines_changed": 1
  },
  {
    "task_id": "usage-check-tokens-output-inverted",
    "method": "no_retrieval",
    "budget": 1000,
    "query_type": "exact",
    "tokens_used": 17,
    "symbols_selected": 0,
    "files_included": 0,
    "assembly_time_ms": 0.0,
    "llm_time_ms": 2012.3,
    "llm_input_tokens": 265,
    "llm_output_tokens": 35,
    "tests_passed": false,
    "test_output": "no edits extracted",
    "patch": "",
    "error": "",
    "failure_mode": "no_patch",
    "target_file_hit": false,
    "patch_files_changed": 0,
    "patch_lines_changed": 0
  },
  {
    "task_id": "usage-check-tokens-output-inverted",
    "method": "bca",
    "budget": 1000,
    "query_type": "exact",
    "tokens_used": 950,
    "symbols_selected": 18,
    "files_included": 12,
    "assembly_time_ms": 267.4,
    "llm_time_ms": 744.2,
    "llm_input_tokens": 1286,
    "llm_output_tokens": 59,
    "tests_passed": true,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        if self.output_tokens_limit is None and output_tokens > self.output_tokens_limit:\nREPLACE:\n        if self.output_tokens_limit is not None and output_tokens > self.output_tokens_limit:\n",
    "error": "",
    "failure_mode": "pass",
    "target_file_hit": true,
    "patch_files_changed": 1,
    "patch_lines_changed": 1
  },
  {
    "task_id": "usage-check-tokens-output-inverted",
    "method": "target_file",
    "budget": 1000,
    "query_type": "exact",
    "tokens_used": 1000,
    "symbols_selected": 0,
    "files_included": 1,
    "assembly_time_ms": 0.1,
    "llm_time_ms": 2424.8,
    "llm_input_tokens": 1149,
    "llm_output_tokens": 73,
    "tests_passed": false,
    "test_output": "_function_schema.py:24: in <module>\n    from ._run_context import RunContext\npydantic_ai_slim/pydantic_ai/_run_context.py:15: in <module>\n    from . import _utils, messages as _messages\npydantic_ai_slim/pydantic_ai/messages.py:28: in <module>\n    from .usage import RequestUsage\nE     File \"/Users/akshankrithick/projects/pydantic-ai/pydantic_ai_slim/pydantic_ai/usage.py\", line 18\nE       @dataclass(repr=False)kw_only=True)\nE                                         ^\nE   SyntaxError: unmatched ')'",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n@dataclass(repr=False, \nREPLACE:\n@dataclass(repr=False)\n\nFILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        if details:\nREPLACE:\n        if details is not None:\n",
    "error": "",
    "failure_mode": "syntax_error",
    "target_file_hit": true,
    "patch_files_changed": 1,
    "patch_lines_changed": 2
  },
  {
    "task_id": "usage-check-tokens-output-inverted",
    "method": "no_retrieval",
    "budget": 4000,
    "query_type": "exact",
    "tokens_used": 17,
    "symbols_selected": 0,
    "files_included": 0,
    "assembly_time_ms": 0.0,
    "llm_time_ms": 1029.8,
    "llm_input_tokens": 265,
    "llm_output_tokens": 32,
    "tests_passed": false,
    "test_output": "file not found: src/cegraph/foo.py",
    "patch": "FILE: src/cegraph/foo.py\nSEARCH:\nif output_tokens_limit is None:\nREPLACE:\nif output_tokens_limit is not None:\n",
    "error": "",
    "failure_mode": "patch_apply_fail",
    "target_file_hit": false,
    "patch_files_changed": 1,
    "patch_lines_changed": 1
  },
  {
    "task_id": "usage-check-tokens-output-inverted",
    "method": "bca",
    "budget": 4000,
    "query_type": "exact",
    "tokens_used": 3931,
    "symbols_selected": 14,
    "files_included": 12,
    "assembly_time_ms": 212.5,
    "llm_time_ms": 1951.4,
    "llm_input_tokens": 3739,
    "llm_output_tokens": 59,
    "tests_passed": true,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        if self.output_tokens_limit is None and output_tokens > self.output_tokens_limit:\nREPLACE:\n        if self.output_tokens_limit is not None and output_tokens > self.output_tokens_limit:\n",
    "error": "",
    "failure_mode": "pass",
    "target_file_hit": true,
    "patch_files_changed": 1,
    "patch_lines_changed": 1
  },
  {
    "task_id": "usage-check-tokens-output-inverted",
    "method": "target_file",
    "budget": 4000,
    "query_type": "exact",
    "tokens_used": 4000,
    "symbols_selected": 0,
    "files_included": 1,
    "assembly_time_ms": 0.1,
    "llm_time_ms": 1002.2,
    "llm_input_tokens": 3733,
    "llm_output_tokens": 59,
    "tests_passed": true,
    "test_output": "yncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))",
    "patch": "FILE: pydantic_ai_slim/pydantic_ai/usage.py\nSEARCH:\n        if self.output_tokens_limit is None and output_tokens > self.output_tokens_limit:\nREPLACE:\n        if self.output_tokens_limit is not None and output_tokens > self.output_tokens_limit:\n",
    "error": "",
    "failure_mode": "pass",
    "target_file_hit": true,
    "patch_files_changed": 1,
    "patch_lines_changed": 1
  }
]