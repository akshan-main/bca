# tests/test_json_body_serializer.py:6-6
from .json_body_serializer import deserialize, serialize

# pydantic_ai_slim/pydantic_ai/providers/google_vertex.py:198-203
async def _creds_from_info(service_account_info: Mapping[str, str]) -> ServiceAccountCredentials:
    service_account_credentials_from_string = functools.partial(
        ServiceAccountCredentials.from_service_account_info,  # type: ignore[reportUnknownMemberType]
        scopes=['https://www.googleapis.com/auth/cloud-platform'],
    )
    return await anyio.to_thread.run_sync(service_account_credentials_from_string, service_account_info)

# pydantic_ai_slim/pydantic_ai/ui/vercel_ai/response_types.py:189-189
    provider_metadata: ProviderMetadata | None = None

# tests/models/test_cohere.py:12-27
from pydantic_ai import (
    Agent,
    ImageUrl,
    ModelAPIError,
    ModelHTTPError,
    ModelRequest,
    ModelResponse,
    ModelRetry,
    RetryPromptPart,
    SystemPromptPart,
    TextPart,
    ThinkingPart,
    ToolCallPart,
    ToolReturnPart,
    UserPromptPart,
)

# pydantic_graph/pydantic_graph/graph.py:72-72
    auto_instrument: bool = field(repr=False)

# pydantic_graph/pydantic_graph/persistence/__init__.py:28-28
StateT = TypeVar('StateT', default=Any)

# pydantic_ai_slim/pydantic_ai/messages.py:367-367
    url: str

# tests/test_tools.py:512-555
def test_takes_model_and_int():
    agent = Agent()

    @agent.tool_plain
    def takes_just_model(model: Foo, z: int) -> str:
        return f'{model.x} {model.y} {z}'

    result = agent.run_sync('', model=FunctionModel(get_json_schema))
    json_schema = json.loads(result.output)
    assert json_schema == snapshot(
        {
            'name': 'takes_just_model',
            'description': None,
            'parameters_json_schema': {
                '$defs': {
                    'Foo': {
                        'properties': {
                            'x': {'type': 'integer'},
                            'y': {'type': 'string'},
                        },
                        'required': ['x', 'y'],
                        'title': 'Foo',
                        'type': 'object',
                    }
                },
                'properties': {
                    'model': {'$ref': '#/$defs/Foo'},
                    'z': {'type': 'integer'},
                },
                'required': ['model', 'z'],
                'type': 'object',
                'additionalProperties': False,
            },
            'outer_typed_dict_key': None,
            'strict': None,
            'kind': 'function',
            'sequential': False,
            'metadata': None,
            'timeout': None,
        }
    )

    result = agent.run_sync('', model=TestModel())
    assert result.output == snapshot('{"takes_just_model":"0 a 0"}')

# tests/graph/beta/test_decisions.py:14-14
pytestmark = pytest.mark.anyio

# pydantic_ai_slim/pydantic_ai/models/cerebras.py:25-25
__all__ = ('CerebrasModel', 'CerebrasModelName', 'CerebrasModelSettings')

# pydantic_ai_slim/pydantic_ai/output.py:3-3
from collections.abc import Awaitable, Callable, Sequence

# tests/test_tools.py:650-664
def test_tool_return_conflict():
    # this is okay
    Agent('test', tools=[ctx_tool], deps_type=int).run_sync('', deps=0)
    # this is also okay
    Agent('test', tools=[ctx_tool], deps_type=int, output_type=int).run_sync('', deps=0)
    # this raises an error
    with pytest.raises(
        UserError,
        match=re.escape(
            "The agent defines a tool whose name conflicts with existing tool from the agent's output tools: 'ctx_tool'. Rename the tool or wrap the toolset in a `PrefixedToolset` to avoid name conflicts."
        ),
    ):
        Agent('test', tools=[ctx_tool], deps_type=int, output_type=ToolOutput(int, name='ctx_tool')).run_sync(
            '', deps=0
        )

# examples/pydantic_ai_examples/ag_ui/api/shared_state.py:139-139
app = AGUIApp(agent, deps=StateDeps(RecipeSnapshot()))

# tests/typed_graph.py:52-58
g1 = Graph[None, None, X](
    nodes=(
        Float2String,
        String2Length,
        Double,
    )
)

# pydantic_ai_slim/pydantic_ai/models/openrouter.py:19-19
from ..settings import ModelSettings

# pydantic_graph/pydantic_graph/beta/graph_builder.py:58-58
SourceOutputT = TypeVar('SourceOutputT', infer_variance=True)

# tests/example_modules/fake_database.py:3-3
from dataclasses import dataclass, field