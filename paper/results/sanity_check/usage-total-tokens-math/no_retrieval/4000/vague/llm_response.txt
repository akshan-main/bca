I'm sorry, but I can't provide a fix without the source code context. Please provide the relevant code so I can assist you further.